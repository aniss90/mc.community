body {
  overflow: none;
}

:root {
  --border-thickness: 2px;
  --border-2x-thickness: calc(2 * var(--border-thickness));
  --button-font-size: 20px;
}

#board {
  border: 6px solid #955713;
  width: 642px;
  height: 642px;
  position: relative;
  max-width: 100vw;
  max-height: 100vh;
  aspect-ratio: 1 / 1;
  box-sizing: border-box;
  margin: 0 auto;
  display: grid;
  grid-template: repeat(8, 1fr) / repeat(8, 1fr);
}

/* Ensure the board scales down on smaller screens */
@media screen and (max-width: 642px), (max-height: 642px) {
  #board {
    width: 100%;
    height: auto;
  }
}

h2,
.overlay-title {
  color: #CCB18D;
}

/* Square styles for main board */
#board .square {
  background-image: url('../icons/chess-pieces.png');
  background-size: 600% 200%;
  width: 100%;
  height: 100%;
  cursor: pointer;
  z-index: 10;
  position: relative;
  box-sizing: border-box;
}

#board .square.empty {
  background-image: none;
}

#board .square.light {
  background-color: #ffce9e;
}

#board .square.dark {
  background-color: #d18b47;
}

#board .square.selected {
  background-color: #895409;
  z-index: 20;
}

/* Chess piece positions for main board */
#board .square.black-king { background-position: 0% 100%; }
#board .square.black-queen { background-position: 20% 100%; }
#board .square.black-bishop { background-position: 40% 100%; }
#board .square.black-knight { background-position: 60% 100%; }
#board .square.black-castle { background-position: 80% 100%; }
#board .square.black-pawn { background-position: 100% 100%; }
#board .square.white-king { background-position: 0% 0%; }
#board .square.white-queen { background-position: 20% 0%; }
#board .square.white-bishop { background-position: 40% 0%; }
#board .square.white-knight { background-position: 60% 0%; }
#board .square.white-castle { background-position: 80% 0%; }
#board .square.white-pawn { background-position: 100% 0%; }

/* Mini-board styles for FEN editor */
#miniBoard {
  border: 2px solid #955713;
  width: 200px;
  height: 200px;
  display: grid;
  grid-template: repeat(8, 1fr) / repeat(8, 1fr);
  margin: 10px auto;
  position: relative;
  box-sizing: border-box;
}

#miniBoard .square {
  background-image: url('../icons/chess-pieces.png');
  background-size: 600% 200%;
  width: 100%;
  height: 100%;
  cursor: pointer;
  position: relative;
  box-sizing: border-box;
}

#miniBoard .square.empty {
  background-image: none;
}

#miniBoard .square.light {
  background-color: #ffce9e;
}

#miniBoard .square.dark {
  background-color: #d18b47;
}

#miniBoard .square.black-king { background-position: 0% 100%; }
#miniBoard .square.black-queen { background-position: 20% 100%; }
#miniBoard .square.black-bishop { background-position: 40% 100%; }
#miniBoard .square.black-knight { background-position: 60% 100%; }
#miniBoard .square.black-castle { background-position: 80% 100%; }
#miniBoard .square.black-pawn { background-position: 100% 100%; }
#miniBoard .square.white-king { background-position: 0% 0%; }
#miniBoard .square.white-queen { background-position: 20% 0%; }
#miniBoard .square.white-bishop { background-position: 40% 0%; }
#miniBoard .square.white-knight { background-position: 60% 0%; }
#miniBoard .square.white-castle { background-position: 80% 0%; }
#miniBoard .square.white-pawn { background-position: 100% 0%; }

/* Overlay styles */
#board .overlay,
#settingsMenu,
#promotionMessage,
#endMessage {
  background-color: rgba(0, 0, 0, 0.6);
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  opacity: 0;
  transition: all 0.3s ease-out;
  display: none;
}

#board .overlay.show,
#settingsMenu.show,
#promotionMessage.show,
#endMessage.show {
  opacity: 1;
  z-index: 100;
  display: flex;
  justify-content: center;
  align-items: center;
}

#board .overlay .overlay-inner,
.settings-container,
#promotionMessage .overlay-inner,
#endMessage .overlay-inner {
  position: relative;
  margin: auto;
  width: 62.3%;
  height: auto;
  max-width: 400px;
  background: #402D1A;
  border: 2px solid #A06E3B;
  padding: 15px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  text-align: center;
  box-sizing: border-box;
  color: #CCB18D;
}

/* Responsive overlay for smaller screens */
@media screen and (max-width: 642px) {
  #board .overlay .overlay-inner,
  .settings-container,
  #promotionMessage .overlay-inner,
  #endMessage .overlay-inner {
    width: 80%;
    height: auto;
    min-height: 150px;
  }
}

/* Style for valid move indicators */
#board .square.valid-move::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 20%;
  height: 20%;
  background-color: rgba(194, 98, 16, 1);
  border-radius: 50%;
  z-index: 15;
  pointer-events: none;
}

/* Ensure circles scale with smaller screens */
@media screen and (max-width: 642px) {
  #board .square.valid-move::after {
    width: 25%;
    height: 25%;
  }
}

/* Style for king in check */
#board .square.king-in-check {
  background-color: #B51818;
  z-index: 20;
}

/* Ensure the shadow scales appropriately on smaller screens */
@media screen and (max-width: 642px) {
  #board .square.king-in-check {
    box-shadow: 0 0 6px #ff0000, 0 0 3px #ff0000 inset;
  }
}

/* Game controls container */
#game-controls {
  margin: 10px 0;
  text-align: center;
}

/* Undo and Forward buttons */
#undo-btn,
#forward-btn {
  padding: 8px 16px;
  margin: 0 5px;
  font-size: 16px;
  cursor: pointer;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  transition: background-color 0.3s;
}

#undo-btn:disabled,
#forward-btn:disabled {
  background-color: #cccccc;
  cursor: not-allowed;
}

#undo-btn:hover:not(:disabled),
#forward-btn:hover:not(:disabled) {
  background-color: #45a049;
}

/* Move list container */
#move-list {
  max-width: 300px;
  margin: 10px auto;
  padding: 10px;
  background-color: #f9f9f9;
  border: 1px solid #ccc;
  border-radius: 4px;
  max-height: 300px;
  overflow-y: auto;
}

#move-list h3 {
  margin: 0 0 10px 0;
  font-size: 18px;
  text-align: center;
}

#move-list-content {
  font-family: monospace;
  font-size: 14px;
  line-height: 1.5;
}

/* Move notation styles */
#moveNotation {
  max-width: 300px;
  margin: 10px auto;
  padding: 10px;
  background-color: #9A6937;

  border-radius: 4px;
  max-height: 150px;
  overflow-x: auto;
  white-space: nowrap;
  text-align: left;
  color: #FFFFFF;
}

.move-entry {
  display: inline-block;
  margin-right: 10px;
  animation: slideIn 0.3s ease-in;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Ensure responsiveness */
@media screen and (max-width: 642px) {
  #game-controls {
    margin: 5px 0;
  }
  #undo-btn,
  #forward-btn {
    padding: 6px 12px;
    font-size: 14px;
  }
  #move-list {
    max-width: 100%;
    margin: 5px;
    max-height: 200px;
  }
  #move-list h3 {
    font-size: 16px;
  }
  #move-list-content {
    font-size: 12px;
  }
  #moveNotation {
    max-width: 100%;
    margin: 5px;
  }
}

#board .overlay .overlay-title,
.settings-container h2,
#promotionMessage .overlay-title,
#endMessage .overlay-title {
  display: block;
  font-weight: bold;
  line-height: 32px;
  font-size: 20px;
}

#board .overlay .overlay-text,
#promotionMessage .overlay-text,
#endMessage .overlay-text {
  line-height: 22px;
  font-size: 16px;
}

#board .overlay .overlay-button,
#promotionMessage .overlay-button,
#endMessage .overlay-button {
  display: inline-block;
  line-height: 34px;
  padding: 0 12px;
  color: #CCB18D;
  background: #9A6937;
  border-radius: 5px;
  text-decoration: none;
  margin: 10px 5px;
}

/* Promotion list styles */
#promotionList {
  margin: 0;
  padding: 20px 0;
  list-style-type: none;
  text-align: center;
}

#promotionList li {
  display: inline-block;
  padding: 0 5px;
}

#promotionList li a {
  background-image: url('../icons/chess-pieces.png');
  background-size: 600% 200%;
  width: 60px;
  height: 60px;
  display: block;
}

@media screen and (max-width: 642px) {
  #promotionList li a {
    width: 50px;
    height: 50px;
  }
}

#promotionList.white li a.queen { background-position: 20% 0%; }
#promotionList.white li a.castle { background-position: 80% 0%; }
#promotionList.white li a.bishop { background-position: 40% 0%; }
#promotionList.white li a.knight { background-position: 60% 0%; }
#promotionList.black li a.queen { background-position: 20% 100%; }
#promotionList.black li a.castle { background-position: 80% 100%; }
#promotionList.black li a.bishop { background-position: 40% 100%; }
#promotionList.black li a.knight { background-position: 60% 100%; }

.timer {
  display: flex;
  position: relative;
  font-size: 24px;
  font-weight: bold;
  margin: 10px 0;
  text-align: left;
  color: #333;
}

#whiteTime,
#blackTime {
  color: #CCB18D;
  background-color: #A26425;
  padding: 5px;
  border-radius: 5px;
  margin: 5p 10px;
}

.king-in-check {
  background-color: rgba(255, 0, 0, 0.5) !important;
}

.settings-container label {
  display: block;
  margin: 10px 0 5px;
  color: #CCB18D;
}

.settings-container select,
.settings-container button,
.settings-container textarea {
  margin: 10px;
  padding: 5px;
  font-size: 16px;
  background-color: #402D1A;
  border: 2px solid #A67645;
  border-radius: 8px;
  outline: none;
  box-shadow:
    0px var(--border-2x-thickness) 0px #3A2510,
    0 0 0 var(--border-thickness) #1a1a1b,
    0 var(--border-2x-thickness) 0 var(--border-thickness) #1a1a1b;
  color: #CCB18D;
}

.settings-container textarea {
  width: 80%;
  resize: vertical;
}
/* ... (الأنماط الأصلية تبقى كما هي مع إضافة التالي) */
.board-flipped {
    transform: rotate(180deg);
}
.board-flipped .square {
    transform: rotate(180deg);
}