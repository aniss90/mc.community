<!DOCTYPE html>  <html lang="ar" >    <head>    
    <meta charset="UTF-8">    
  <link rel="stylesheet" href="../style/main.css">    
  <link rel="icon" type="image/x-icon" href="../web/ytlogo.png">    
    <title>الدردشة</title>    
    <style>    
     @font-face {      
      font-family: minecraft;      
      src: url('../font/Minecraft-Default.otf');      
    }      
    @font-face {      
      font-family: minecraft-ten;      
      src: url('../font/Minecraft-Ten.ttf');      
    }      
    @font-face {      
      font-family: minecraft-five;      
      src: url('../font/Minecraft-Five.ttf');      
    }    .chat-container {    
    display: flex;    
    flex-direction: column;    
    height: 100vh;    
    margin: 0 auto;    
    box-shadow: 0 0 10px rgba(0, 0, 0, 0);    
}    #chatBox {
flex: 1;
overflow-y: auto;
padding: 15px;
background-color: #23232300;
}

.message {
margin: 5px 0;
padding: 10px 15px;
border-radius: 7px;
max-width: 80%;
display: inline-block;
word-wrap: break-word;
position: relative;
clear: both;
transition: all 0.3s ease;
}

.myMessage {
background-color: #dcf8c6;
float: right;
margin-right: 10px;
}

.otherMessage {
background-color: white;
float: left;
margin-left: 10px;
}

.input-area {
display: flex;
align-items: flex-end;
padding: 5px 10px;
background-color: #4B4B4B;
border: 2px solid #484848;
border-radius: 25px;
margin: 10px;
box-sizing: border-box;
transition: all 0.2s ease;
transition: height 0.2s ease;
}

.input-wrapper {
flex: 1;
display: flex;
align-items: center;
align-items: flex-end;
}

#message-input {
width: 100%;
background-color: transparent;
border: none;
outline: none;
box-shadow: none;
color: white;
font-size: 16px;
padding: 6px 10px;
line-height: 20px;
resize: none;
overflow-y: hidden;
min-height: 20px;
max-height: 150px;
height: auto;
transition: height 0.2s ease;
}

.action-buttons {
display: flex;
align-items: center;
gap: 5px;
margin-left: 8px;
}

/* تنسيق جديد لأزرار الإرسال والرفع والستيكرز */
#send-btn,
#upload-btn,
#sticker-btn {
width: 45px;
height: 40px;
border: none;
border-radius: 45%;
background-size: 25px 25px;
background-color: #2F2F2F;
background-position: center;
background-repeat: no-repeat;
cursor: pointer;
transition: all 0.3s ease;
}
#upload-btn,
#sticker-btn {
width: 40px;
background-color: #42445A00;
transition: all 1s ease;
}
#send-btn {
background-image: url('../icons/send_icon.svg');
display: none;
}

#upload-btn {
background-image: url('../icons/Gallery_icon.svg');
}

#sticker-btn {
background-image: url('../icons/sticker_icon.svg');
display: block !important; /* التأكد من ظهور زر الستيكرز دائمًا */
}

#send-btn.active {
display: block;

}

#upload-btn.hidden {
display: none;
}

#image-input {
display: none;
}

.blur-background .message:not(.selected-message) {
filter: blur(4px);
}

.message-options {
position: absolute;
background: rgba(0, 0, 0, 0.8);
color: white;
padding: 8px;
border-radius: 8px;
display: flex;
gap: 10px;
bottom: -40px;
left: 50%;
transform: translateX(-50%);
display: none;
z-index: 100;
backdrop-filter: blur(8px);
-webkit-backdrop-filter: blur(90px);
}

.option-btn {
padding: 6px 12px;
border: none;
cursor: pointer;
border-radius: 5px;
font-size: 14px;
}

.option-btn.copy {
background-color: green;
color: white;
}

.option-btn.delete {
background-color: red;
color: white;
}

#chatUser {
font-family: minecraft-ten;
font-size: 30px;
}

.header {
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.81);
transition: all 0.3s ease;
}

.lodinimg {
left: 50%;
transform: translateX(-50%);
transition: all 0.3s ease;
}
@keyframes slideUpMessage {

0% {
transform: translateY(50px);
opacity: 0;
}
100% {
transform: translateY(0);
opacity: 1;
}
}

.message.new-message {
animation: slideUpMessage 0.4s ease-out;
}

/* أنماط لوحة الستيكرات */
.stickers-panel {
position: fixed;
bottom: 80px;
right: 20px;
width: 300px;
max-height: 400px;
background-color: #2d2d2d;
border-radius: 15px;
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
overflow: hidden;
display: none;
z-index: 1000;
border: 1px solid #444;
}

.stickers-panel[aria-hidden="false"] {
display: block;
}

.panel-header {
display: flex;
justify-content: space-between;
align-items: center;
padding: 10px 15px;
background-color: #3a3a3a;
border-bottom: 1px solid #444;
color: white;
font-family: minecraft-ten;
}

.panel-close {
background: none;
border: none;
color: white;
cursor: pointer;
font-size: 16px;
}

.stickers-grid {
display: grid;
grid-template-columns: repeat(4, 1fr);
gap: 10px;
padding: 15px;
overflow-y: auto;
max-height: 350px;
}

.sticker-item {
width: 100%;
aspect-ratio: 1;
cursor: pointer;
transition: transform 0.2s;
border-radius: 8px;
overflow: hidden;
}

.sticker-item:hover {
transform: scale(1.1);
background-color: #bbb;
}

.sticker-item img {
width: 100%;
height: 100%;
object-fit: contain;
}
.message .heart-icon {
position: absolute;
bottom: -12px;
left: 10px;
font-size: 18px;
color: red;
transform: translateY(0);
opacity: 0;
transition: all 0.3s ease;
}

.message.show-heart .heart-icon {
opacity: 1;
transform: translateY(-3px);
}
.message {
position: relative;
}

.message .heart-icon {
position: absolute;
bottom: -12px;
left: 10px;
font-size: 18px;
color: red;
opacity: 1; /* دائماً ظاهر إذا كان liked */
}
</style>

</head>    
<body>    
    <div class="chat-container">    
        <div class="header"> <button class="back" id="backButton" type="button" onclick="goBack()"></button>       
            <div id="chatUser"><img src="../icons/magic_book.gif" height="30" /></div>    
        </div>  <div id="chatBox"><img class="lodinimg" src="../icons/loading_spinner.gif" height="20" /></div>    <div class="input-area">    
    <textarea id="message-input" placeholder="Message.." rows="1"></textarea>    
    <div class="action-buttons">    
        <button id="sticker-btn"></button>    
        <button id="upload-btn"></button>    
        <button id="send-btn"></button>    
        <input type="file" id="image-input" accept="image/*">    
    </div>    
</div>

</div>    <!-- لوحة الستيكرات -->    <div class="stickers-panel" id="stickersPanel" aria-hidden="true">    
    <div class="panel-header">    
        <div style="font-size:14px">Stickers</div>    
        <div>    
            <button class="panel-close" id="closeStickersBtn"> ✕</button>    
        </div>    
    </div>    
    <div class="stickers-grid" id="stickersGrid"></div>    
    <div id="stickersEmpty" style="display:none; color:#bbb; padding:10px; text-align:center;">    
        no stickers right now.    
    </div>    
</div>    <script type="module">    
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";    
    import { getFirestore, collection, addDoc, query, where, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";    
    import { deleteDoc, doc, updateDoc } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";    
    import { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-storage.js";    
  
    // Firebase configuration    
    const firebaseConfig = {    
        apiKey: "AIzaSyBf-HKpI4G5p6E0xP1OHGLxtDTGwE_0gg0",    
        authDomain: "minecraft-community-4fd3d.firebaseapp.com",    
        projectId: "minecraft-community-4fd3d",    
        storageBucket: "minecraft-community-4fd3d.firebasestorage.app",    
        messagingSenderId: "550140131027",    
        appId: "1:550140131027:web:a5186726cf5372e138c626",    
        measurementId: "G-F18SFG2LMZ"    
    };    
  
    // Initialize Firebase    
    const app = initializeApp(firebaseConfig);    
    const db = getFirestore(app);    
    const storage = getStorage(app);    
        
  
    document.addEventListener("DOMContentLoaded", () => {    
        // Get DOM elements    
        const chatBox = document.getElementById("chatBox");    
        const messageInput = document.getElementById("message-input");    
        const sendButton = document.getElementById("send-btn");    
        const imageInput = document.getElementById("image-input");    
        const uploadBtn = document.getElementById("upload-btn");    
        const stickerBtn = document.getElementById("sticker-btn");    
        const chatUser = document.getElementById("chatUser");    
        const stickersPanel = document.getElementById("stickersPanel");    
        const closeStickersBtn = document.getElementById("closeStickersBtn");    
        const stickersGrid = document.getElementById("stickersGrid");    
  
        // Check if all required elements exist    
        if (!chatBox || !messageInput || !sendButton || !imageInput || !uploadBtn || !chatUser || !stickerBtn) {    
            console.error("One or more required DOM elements not found");    
            return;    
        }    
  
        // Get active user and receiver    
        const activeUser = localStorage.getItem("activeUser");    
        const urlParams = new URLSearchParams(window.location.search);    
        const receiver = urlParams.get("user");    
  
        if (!activeUser || !receiver) {    
            alert("يجب تسجيل الدخول واختيار مستخدم للدردشة!");    
            window.location.href = "users_list.html";    
            return;    
        }    
  
        // Set chat user name    
        chatUser.innerText = receiver;    
  
        // Messages collection reference    
        const messagesRef = collection(db, "messages");    
  
        // Time formatting function    
        function timeSince(date) {    
            const seconds = Math.floor((new Date() - date) / 1000);    
            let interval = Math.floor(seconds / 31536000);    
            if (interval >= 1) return ` ${interval} y`;    
            interval = Math.floor(seconds / 604800);    
            if (interval >= 1) return ` ${interval} w`;    
            interval = Math.floor(seconds / 86400);    
            if (interval >= 1) return ` ${interval} d`;    
            interval = Math.floor(seconds / 3600);    
            if (interval >= 1) return ` ${interval} h`;    
            interval = Math.floor(seconds / 60);    
            if (interval >= 1) return ` ${interval} min`;    
            return "now";    
        }    
  
        // HTML escaping function    
        function escapeHTML(text) {    
            const div = document.createElement('div');    
            div.textContent = text;    
            return div.innerHTML.replace(/</g, "&lt;").replace(/>/g, "&gt;");    
        }    
  
        // Message query    
        const messagesQuery = query(    
            messagesRef,    
            where("sender", "in", [activeUser, receiver]),    
            where("receiver", "in", [activeUser, receiver]),    
            orderBy("timestamp")    
        );    
  
        // Real-time messages listener    
        const unsubscribe = onSnapshot(messagesQuery, (snapshot) => {    
            chatBox.innerHTML = "";    
                
            const docs = snapshot.docs;    
                
            docs.forEach((docSnap, index) => {    
                const data = docSnap.data();    
                const isMyMessage = (data.sender === activeUser);    
                const messageElement = document.createElement("div");    
                messageElement.classList.add("message", isMyMessage ? "myMessage" : "otherMessage");    
                messageElement.setAttribute("data-id", docSnap.id);    
                    
                const timestamp = data.timestamp?.toDate ? data.timestamp.toDate() : new Date();    
                const formattedTime = timeSince(timestamp);    
                const fullDate = timestamp.toLocaleString("en-NM");  
  
// بعد حساب fullDate كما عندك:  
  
messageElement.setAttribute("data-id", docSnap.id);  
messageElement.setAttribute("data-timestamp", fullDate); // نخزن التاريخ هنا (ليظهر في options)  
messageElement.setAttribute("data-type", data.type || "text"); // نخزن نوع الرسالة (text, image, sticker)  
  
// ثم نبني محتوى الرسالة بدون عرض التاريخ:  
let contentHTML = `<strong>${data.sender}:</strong><br>`;

if (data.type === "image") {
    contentHTML += `<img src="${data.message}" style="max-width:100%;max-height:300px;border-radius:10px;" alt="صورة محادثة">`;
} else if (data.type === "sticker") {
    contentHTML += `<img src="${data.message}" style="max-width:150px;max-height:150px;" alt="ستيكر">`;
} else {
    const escapedMessage = escapeHTML(data.message).replace(/\n/g, "<br>");
    contentHTML += `<span class="message-text">${escapedMessage}</span>`;
}
  
messageElement.innerHTML = contentHTML;  
  
if (index === docs.length - 1) {    
                    messageElement.classList.add("new-message");    
                    setTimeout(() => {    
                        messageElement.classList.remove("new-message");    
                    }, 600);    
                }    
                if (data.liked) {    
const heart = document.createElement("div");    
heart.className = "heart-icon";    
heart.textContent = "❤";    
messageElement.appendChild(heart);    
messageElement.classList.add("show-heart");  
  
}  
chatBox.appendChild(messageElement);  
});  
  
chatBox.scrollTop = chatBox.scrollHeight;    
        });    
  
        function autoResizeTextarea() {    
            messageInput.style.height = "auto";    
            messageInput.style.height = Math.min(messageInput.scrollHeight, 150) + "px";    
        }    
  
        messageInput.addEventListener("input", autoResizeTextarea);    
  
        // عند الإرسال    
        async function sendMessage() {    
            let messageText = messageInput.value.trim();    
            if (messageText === "") return;    
                
            if (messageText.length > 200) {    
                messageText = messageText.substring(0, 200);    
                alert("لا يمكنك إرسال أكثر من 200 حرف!");    
            }    
                
            try {    
                await addDoc(messagesRef, {    
                    sender: activeUser,    
                    receiver: receiver,    
                    message: messageText,    
                    timestamp: new Date()    
                });    
                    
                messageInput.value = "";    
                messageInput.style.height = "40px";    
            } catch (error) {    
                console.error("خطأ أثناء الإرسال:", error);    
            }    
        }    
  
        sendButton.addEventListener("click", sendMessage);    
  
        // Image upload handling    
        uploadBtn.addEventListener("click", () => {    
            imageInput.click();    
        });    
  
        imageInput.addEventListener("change", async (e) => {    
            const file = e.target.files[0];    
            if (!file) return;    
  
            uploadBtn.disabled = true;    
            uploadBtn.textContent = " wait...";    
  
            const reader = new FileReader();    
            reader.onload = async (event) => {    
                const imageBase64 = event.target.result;    
  
                try {    
                    await addDoc(messagesRef, {    
                        sender: activeUser,    
                        receiver: receiver,    
                        message: imageBase64,    
                        timestamp: new Date(),    
                        type: "image"    
                    });    
                } catch (error) {    
                    console.error("حدث خطأ أثناء حفظ الصورة:", error);    
                    alert("فشل تحميل الصورة!");    
                } finally {    
                    uploadBtn.disabled = false;    
                    uploadBtn.textContent = "photo";    
                    imageInput.value = "";    
                }    
            };    
            reader.onerror = () => {    
                alert("خطأ في قراءة الصورة!");    
                uploadBtn.disabled = false;    
                uploadBtn.textContent = "photo";    
            };    
            reader.readAsDataURL(file);    
        });    
  
        // Sticker button functionality    
        stickerBtn.addEventListener("click", toggleStickersPanel);    
        closeStickersBtn.addEventListener("click", toggleStickersPanel);    
  
        function toggleStickersPanel() {    
            const isHidden = stickersPanel.getAttribute("aria-hidden") === "true";    
            stickersPanel.setAttribute("aria-hidden", !isHidden);    
                
            if (isHidden) {    
                loadStickers();    
            }    
        }  
  
const stickers = [  
"Banker.png",  
"Banned.png",  
"Battle Box.png",  
"Beta.png",  
"Big Head.png",  
"Boxes.png",  
"Discord.png",  
"Earth.png",  
"Float.png",  
"Friends.png",  
"Gems.png",  
"Laser Tag.png",  
"Lucky Shot.png",  
"Market.png",  
"Match 5.png",  
"Money.png",  
"Parkour Tag.png",  
"Rules.png",  
"Santa.png",  
"Slime Walls.png",  
"Summer.png",  
"Sumo.png",  
"Tic Tac Toe.png",  
"Wizard.png"  
];  
  
function loadStickers() {  
stickersGrid.innerHTML = "";  
  
stickers.forEach(file => {    
    const stickerItem = document.createElement("div");    
    stickerItem.className = "sticker-item";    
        
    const img = document.createElement("img");    
    img.src = `../Stickers/${file}`;    
    img.alt = file;    
        
    img.onerror = function() {    
        this.parentNode.remove();    
    };    
        
    stickerItem.appendChild(img);    
    stickerItem.addEventListener("click", () => {    
        sendSticker(img.src);    
        stickersPanel.setAttribute("aria-hidden", "true");    
    });    
        
    stickersGrid.appendChild(stickerItem);    
});  
  
}  
  
async function sendSticker(stickerUrl) {    
            try {    
                await addDoc(messagesRef, {    
                    sender: activeUser,    
                    receiver: receiver,    
                    message: stickerUrl,    
                    timestamp: new Date(),    
                    type: "sticker"    
                });    
            } catch (error) {    
                console.error("Error sending sticker:", error);    
                alert("Failed to send sticker");    
            }    
        }    
  
        // Long press message handling    
        let holdTimeout;    
        let isHolding = false;    
  
        chatBox.addEventListener("mousedown", handleLongPress);    
        chatBox.addEventListener("touchstart", handleLongPress);    
        chatBox.addEventListener("mouseup", cancelHold);    
        chatBox.addEventListener("touchend", cancelHold);    
        chatBox.addEventListener("mouseleave", cancelHold);    
  
        function handleLongPress(event) {    
            if (!event.target.classList.contains("message")) return;    
  
            let messageElement = event.target.closest(".message,.mymessage,.othermessage");    
            let messageText = messageElement.innerText;    
  
            isHolding = true;    
  
            holdTimeout = setTimeout(() => {    
                if (isHolding) {    
                    showOptions(messageElement, messageText);    
                }    
            }, 600);    
        }    
  
        function cancelHold() {    
            isHolding = false;    
            clearTimeout(holdTimeout);    
        }    
  
        async function deleteMessage(docId, messageElement) {    
            try {    
                const messageRef = doc(db, "messages", docId);    
                await deleteDoc(messageRef);    
                messageElement.remove();    
            } catch (error) {    
                console.error("فشل في حذف الرسالة:", error);    
            }    
        }    
  
    function showOptions(messageElement, messageText) {    
closeOptions();    
    
document.body.classList.add("blur-background");    
messageElement.classList.add("selected-message");    
    
const optionsContainer = document.createElement("div");    
optionsContainer.classList.add("message-options");    
    
// --- زر عرض التاريخ (معطّل)    
const timestamp = messageElement.getAttribute("data-timestamp");    
if (timestamp) {    
    const dateBtn = document.createElement("button");    
    dateBtn.innerText = timestamp; // نص التاريخ (مثلاً: "9/8/2025, 12:00:00")    
    dateBtn.classList.add("option-btn");    
    dateBtn.disabled = true; // معطّل لوجوده فقط للعرض    
    dateBtn.style.backgroundColor = "#555";    
    dateBtn.style.color = "#fff";    
    optionsContainer.appendChild(dateBtn);    
}    
    
// --- زر النسخ    
let copyBtn = document.createElement("button");    
copyBtn.innerText = "copy";    
copyBtn.classList.add("option-btn", "copy");    
copyBtn.addEventListener("click", () => {    
    // نسخ نص الرسالة الصافي (نختار .message-text لو متوفر)    
    const textEl = messageElement.querySelector('.message-text');    
    const textToCopy = textEl ? textEl.innerText : messageText;    
    navigator.clipboard.writeText(textToCopy);    
    alert("copied ✅\n تم نسخ ✅");    
    closeOptions();    
});    
optionsContainer.appendChild(copyBtn);    
    
// --- زر الحذف (مثل السابق)    
let deleteBtn = document.createElement("button");    
deleteBtn.innerText = "Delete";    
deleteBtn.classList.add("option-btn", "delete");    
deleteBtn.style.display = messageElement.classList.contains("myMessage") ? "block" : "none";    
deleteBtn.addEventListener("click", async () => {    
    if (confirm("Are you sure or are you kidding?\nهل انت متاكد او تمزح?")) {    
        const docId = messageElement.getAttribute("data-id");    
        await deleteMessage(docId, messageElement);    
        closeOptions();    
    }    
});    
optionsContainer.appendChild(deleteBtn);    
    
// --- زر التعديل (يظهر فقط للرسائل النصية الخاصة بك)    
const isMine = messageElement.classList.contains("myMessage");    
const type = messageElement.getAttribute("data-type") || "text";    
    
let editBtn = document.createElement("button");    
editBtn.innerText = "Edit";    
editBtn.classList.add("option-btn");    
editBtn.style.backgroundColor = "orange";    
editBtn.style.color = "white";    
    
if (isMine && type === "text") {    
    editBtn.style.display = "block";    
    editBtn.addEventListener("click", () => {    
        startEditing(messageElement);    
        closeOptions();    
    });    
} else {    
    editBtn.style.display = "none";    
}    
optionsContainer.appendChild(editBtn);    
    
messageElement.appendChild(optionsContainer);    
optionsContainer.style.display = "flex";    
    
setTimeout(() => {    
    document.addEventListener("click", closeOptions);    
}, 100);  
  
}  
  
function closeOptions() {    
            let options = document.querySelector(".message-options");    
            if (options) options.remove();    
            document.body.classList.remove("blur-background");    
  
            let selectedMessage = document.querySelector(".selected-message");    
            if (selectedMessage) selectedMessage.classList.remove("selected-message");    
  
            document.removeEventListener("click", closeOptions);    
        }    
  
        // Last seen functionality    
        let lastSeenTimestamp = null;    
  
        function updateLastSeen() {    
            lastSeenTimestamp = new Date().toISOString();    
            const userDocRef = doc(db, 'users', activeUser);    
            updateDoc(userDocRef, {    
                [`lastSeenMessages.${receiver}`]: lastSeenTimestamp    
            }).catch(error => {    
                console.error("Error updating last seen:", error);    
            });    
        }    
  
        updateLastSeen();    
  
        window.addEventListener('click', updateLastSeen);    
        window.addEventListener('scroll', updateLastSeen);    
        window.addEventListener('keydown', updateLastSeen);    
  
        // Clean up on page unload    
        window.addEventListener('beforeunload', () => {    
            unsubscribe();    
        });  
  
chatBox.addEventListener("dblclick", async function(e) {  
const messageEl = e.target.closest(".message");  
if (!messageEl) return;  
  
const docId = messageEl.getAttribute("data-id");    
const isLiked = messageEl.classList.contains("show-heart");    
    
try {    
    const messageRef = doc(db, "messages", docId);    
    await updateDoc(messageRef, { liked: !isLiked });    
        
    if (isLiked) {    
        // إزالة القلب    
        messageEl.classList.remove("show-heart");    
        const heart = messageEl.querySelector(".heart-icon");    
        if (heart) heart.remove();    
    } else {    
        // إضافة القلب    
        const heart = document.createElement("div");    
        heart.className = "heart-icon";    
        heart.textContent = "❤";    
        messageEl.appendChild(heart);    
        messageEl.classList.add("show-heart");    
    }    
} catch (error) {    
    console.error("خطأ أثناء تحديث الإعجاب:", error);    
}  
  
});  
});  
</script>  <script>  
const messageInput = document.getElementById('message-input');  
  
messageInput.addEventListener('input', function() {    
    const value = this.value.trim();    
        
    if (value === '') {    
        this.style.direction = 'ltr';    
        return;    
    }    
        
    const firstChar = value[0];    
    const isArabic = /[\u0600-\u06FF]/.test(firstChar);    
        
    this.style.direction = isArabic ? 'rtl' : 'ltr';    
});  
  
</script>    <script>    
    document.addEventListener('DOMContentLoaded', function() {    
        const messageInput = document.getElementById('message-input');    
        const sendBtn = document.getElementById('send-btn');    
        const uploadBtn = document.getElementById('upload-btn');  messageInput.addEventListener('input', function() {    
        if (this.value.trim() !== '') {    
            sendBtn.classList.add('active');    
            uploadBtn.classList.add('hidden');    
        } else {    
            sendBtn.classList.remove('active');    
            uploadBtn.classList.remove('hidden');    
        }    
    });    
});    
    
function goBack() {    
    if (window.history.length > 1) {    
        window.history.back();    
    } else {    
        window.location.href = '/';    
    }    
}  
  
</script>    </body>    
</html>    