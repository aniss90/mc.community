<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <link rel="icon" type="image/x-icon" href="../web/mcco-logo.png">
  <link rel="stylesheet" href="../style/main.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <title>mc co-homepage </title>
  <meta name="description" content="Welcome to mcco â€“ the ultimate platform to play, connect, and shop! Collect coins, unlock tools, chat with friends, and join exciting challenges. Your adventure starts here!">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://aniss90.github.io/mc.community/">
<meta property="og:title" content="mcco - Play, Connect & Have Fun!">
<meta property="og:description" content="Discover mcco, the all-in-one community where you can collect coins, buy tools, chat, and enjoy fun challenges with friends. Start exploring today!">
<meta property="og:image" content="https://aniss90.github.io/mc.community/web/mcco-logo.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://aniss90.github.io/mc.community/">
<meta property="twitter:title" content="mcco - Play, Connect & Have Fun!">
<meta property="twitter:description" content="Join mcco and explore a fun world of coins, tools, chatting, and friendly challenges. Adventure starts now!">
<meta property="twitter:image" content="https://aniss90.github.io/mc.community/web/mcco-logo.png">
  <style>
    @font-face {
      font-family: minecraft;
      src: url('../font/Minecraft-Default.otf');
    }
    @font-face {
      font-family: minecraft-ten;
      src: url('../font/Minecraft-Ten.ttf');
    }
    @font-face {
      font-family: minecraft-five;
      src: url('../font/Minecraft-Five.ttf');
    } 
    @font-face {
      font-family: MinecraftFive-Regular;
      src: url('../font/MinecraftFive-Regular.ttf');
    }
    
    
    /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© */
    #points {
      color: #FFBC13; 
      font-size: 15px; 
    }

    #welcomeMessage {
      color: #FFFFFF; 
      font-size: 15px; 
      font-family: minecraft-five; 
    }

    
    @keyframes slideDown {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    
    
    /* ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø®ØµØµ */
    .custom-alert-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      backdrop-filter: blur(5px);
      background: rgba(0, 0, 0, 0.4);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .custom-alert-box {
      background-color: white;
      padding: 30px;
      text-align: center;
      border-radius: 20px;
      font-family: minecraft;
      font-size: 20px;
      color: black;
      animation: popUp 0.5s ease;
      min-width: 250px;
    }

    .custom-alert-box h2 {
      margin: 0;
      font-size: 22px;
    }

    .custom-alert-points {
      font-size: 35px;
      font-weight: bold;
      margin: 10px 0;
    }

    /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† */
    @keyframes popUp {
      0% {
        transform: scale(0.5);
        opacity: 0;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    /* Ù‚Ø§Ø¦Ù…Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† */
.username-dropdown {
  position: absolute;
  transform: translate( 35%, 17%); /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø±ÙƒØ² Ø¨Ø¯Ù‚Ø© */
  background-color: #333; /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© */
  max-height: 60%;
  overflow-y: auto;
  z-index: 1000;
  max-width: 58%;
  width: 60%;
  display: none;
  border-top: 2px solid #737373;
        border-left: 2px solid #737373;
        border-right: 2px solid #737373;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  bottom: 100%;
}

.username-dropdown div {
  padding: 8px 12px;
  cursor: pointer;
  color: white; /* Ù„ÙˆÙ† Ø§Ù„Ø®Ø· Ø£Ø¨ÙŠØ¶ */
  border-bottom: 1px solid #444; /* Ø®Ø· ÙØ§ØµÙ„ Ø¨Ù„ÙˆÙ† Ø¯Ø§ÙƒÙ† */
}

.username-dropdown div:last-child {
  border-bottom: none;
}

.username-dropdown div:hover {
  background-color: #555; /* Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ… */
  color: white; 
  background-color: #3d3d3d;
  transition: background-color 0.2s ease; /* ØªØ£Ø«ÙŠØ± Ø³Ù„Ø³ */

}

    .username-dropdown div {
  padding: 8px 12px;
  cursor: pointer;
  
}
  .menu {
            position: absolute;
            border: none;
            top: 20px;
            left: 10px;
            cursor: pointer;
            
            padding: 10px;
            background: url(../icons/menu@0.5x.icon-e2970.png);
            background-size:  contain;
            background-position: center;
            background-repeat: no-repeat;
            z-index: 9999;
        } 
          .users-btn {
            position: absolute;
            border: none;
            right: 10px;
            top: 20px;
            cursor: pointer;
            padding: 10px;
            background: url(../icons/friends-9e435.png);
            background-size:  contain;
            background-position: center;
            background-repeat: no-repeat;
            z-index: 9999;
          
        } 
       
        .rate {
            position: fixed;
            display: flex;
            border: none;
            right: 45px;
            top: 20px;
            cursor: pointer;
            padding: 10px;
            background: url(../icons/star.png);
            background-size:  contain;
            background-position: center;
            background-repeat: no-repeat;
            z-index: 9999;
            gap: 5px;
        }
                .settings-btn {
          position: fixed;
          display: flex;
          border: none;
          left: 45px;
          top: 20px;
          cursor: pointer;
          padding: 10px;
          background: url(../icons/Setting_icon.png);
          background-size: contain;
          background-position: center;
          background-repeat: no-repeat;
          z-index: 9999;
          gap: 5px;
          
  
        }

.username-dropdown div:last-child {
  border-bottom: none; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø®Ø· Ù…Ù† Ø¢Ø®Ø± Ø¹Ù†ØµØ± */
}

.username-dropdown div:hover {
  background-color: #515151;
} 
/* Ø£Ù†Ù…Ø§Ø· Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© ØªØ­Øª Ø§Ù„Ø²Ø± */
.logout-dropdown {
  position: absolute;
  top: 10px;
  left: 10px;
  background-color: #9C9C9C00; /* ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¹ØªØ§Ù…Ø© Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª */
  backdrop-filter: blur(8px); /* Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© ØªØ¶ÙŠÙ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¨Ù„ÙˆØ± */
  -webkit-backdrop-filter: blur(5px);
  border-radius: 5px;
  z-index: 10000;
  display: none;
  text-align: left;
  border: 1px solid #555;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  min-width: 180px;
  animation: slideDown 0.2s ease-out;
}

.logout-dropdown h3 {
  color:#000000 ;
  margin: 10px;
  padding-bottom: 8px;
  border-bottom: 1px solid #555;
  font-family: minecraft;
  font-size: 14px;
}

.logout-options {
  display: flex;
  flex-direction: column;
  gap: 5px;
  padding: 8px;
}



/* ØªØ¹Ø¯ÙŠÙ„ Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
/* Ø£Ù†Ù…Ø§Ø· Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
.dropdown-button {
  background: none;
  border: none;
  color: #FFFFFF;
  text-shadow: 0px 2px 0px #000000;
  padding: 8px 12px;
  text-align: auto;
  cursor: pointer;
  font-family: minecraft-five;
  font-size: 13px;
  border-radius: 3px;
  width: 100%;
  transition: all 0.3s ease;
}

.dropdown-button:hover {
  background-color: #444;
  color: white;
}

#confirmLogout {
  color: #ff6b6b;
  transition: all 0.3s ease;
}

#confirmLogout:hover {
  background-color: #ff3b3b;
  color: white;
}
#points{
            text-shadow:0px 1px 0px #3A2700;
            background: #916204;
            border: 2px solid #A6730F;
            color: #FFD952;
            font-size: 17px;
}

/* Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ù…ÙŠØ´Ù† Ù„Ù„Ø¹Ø¯Ø§Ø¯ */
@keyframes countUp {
  from {
    transform: scale(1.2);
    opacity: 0.7;
  }
  to {
    transform: scale(1);
    opacity: 1;
    
  }
}

.counting {
  animation: countUp 0.3s ease-out;
}
/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø¹Ø¯Ø§Ø¯ */
@keyframes countDown {
  0% {
    transform: translateY(0) scale(1);
    opacity: 1;
    color: #FFD952;
  }
  50% {
    transform: translateY(-10px) scale(1.1);
    opacity: 0.8;
    color: #ff6b6b;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
    color: #FFD952;
  }
}

.counting-down {
  animation: countDown 0.5s ease-out;
}
#points-float{
  padding-bottom: 20px;
  z-index: 10000;
}
/* Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ù…Ø§Ø· Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
.notification-container {
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 10000;
    max-width: 300px;
}

.notification {
    background-color: #2C8014;
    color: white;
    padding: 15px;
    margin-bottom: 10px;
    z-index: 10000;
    border: 2px solid #4f913c;
    box-shadow: 0 3px 0px rgba(1, 97, 12, 1);
    cursor: pointer;
    transform: translateX(100%);
    animation: slideIn 0.5s forwards;
    display: flex;
    align-items: center;
}

.notification img {
    width: 30px;
    height: 30px;
    margin-left: 10px;
    
}

.notification-content {
    flex: 1;
}

.notification-title {
    font-weight: bold;
    margin-bottom: 5px;
    font-family: minecraft-five;
    font-size: 14px;
}

.notification-message {
    font-family: minecraft-five;
    font-size: 12px;
    opacity: 0.9;
}

@keyframes slideIn {
    to { transform: translateX(0); }
}

@keyframes slideOut {
    to { transform: translateX(100%); }
}
.img2 img{
  height: 12px;
  width: auto;
}
span{
  font-family: minecraft-five;
}

 .coin-particle {
      position: absolute;
      width: 16px;
      height: 16px;
      background-image: url('../icons/coinss_gif.gif');
      background-size: cover;
      pointer-events: none;
      z-index: 1;
      animation: float 1.5s ease-out forwards;
      opacity: 1;
    
    }

    @keyframes float {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(var(--move-x), var(--move-y)) scale(1.2);
        opacity: 0;
      }
    }

#whiteButton{
  text-shadow: 1px 1px 0.9px rgba(180, 125, 0, 1);
            height: 40px;
            width: 100%;
            border: 2px solid #FFFFFF;
            border: 2px solid #8C6A15;
            background-color: #2E2100;
                box-shadow:
        0px 3px 0px #2E2100,
        0 0 0 var(--border-thickness) #1a1a1b,
        0 3px 0 2px #1a1a1b;
            font-size: 16px;
            cursor: pointer;
            position: relative;
            display: inline-block;
            padding: 10px;
            color: #FFFFFF;
            margin: auto;
            transition: all 0.3s ease;
}
#whiteButton:hover{
            color:#FFFFFF ;
            width: 100%;
            position: relative;
            border: 2px solid #FFD15E;
            background-color: #2E2100;
            box-shadow:
        0px 0px 15px #BF9837,
        0 0 0 var(--border-thickness) #1a1a1b,
        0 0 0 0 #1a1a1b;
  
}
/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¸Ù‡ÙˆØ± Ø§Ù„ØªØ¯Ø±ÙŠØ¬ÙŠ Ù„Ù„ØµÙØ­Ø© */


@keyframes fadeIn {
  to {
    opacity: 1;
  }
}
.content {
  opacity: 0;
  transform: translateY(10px);
  animation: slideDownFadeIn 0.7s ease-out 0.4s forwards;
}
 

.content {
  opacity: 0;
  transform: translateY(10px);
  animation: slideUpFadeIn 0.7s ease-out 0.4s forwards;
}

.title {
  opacity: 0;
  transform: translateY(10px);
  animation: slideUpFadeIn 0.9s ease-out 0.9s forwards;
}

.description {
  opacity: 0;
  transform: translateY(10px);
  animation: slideUpFadeIn 0.9s ease-out 0.8s forwards;
}

.button {
  opacity: 0;
  transform: translateY(10px);
  animation: slideUpFadeIn 0.9s ease-out 1s forwards;
}
#D9A782
@keyframes slideDownFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideUpFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
#welcomeMessage {
  
  transform: translateY(10px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  white-space: nowrap;
  overflow: hidden;
  font-size: 1.2em;
}

.smooth-typing {
  border-right: 2px solid rgba(0, 0, 0, 0.7);
  animation: 
    blinkCursor 0.8s infinite,
    gentlePulse 0.5s ease-in-out infinite alternate;
}

.typing-complete {
  border-right: none;
  animation: gentleFadeIn 0.5s ease-out;
}

@keyframes blinkCursor {
  0%, 100% { border-color: rgba(0, 0, 0, 0.2); }
  50% { border-color: rgba(0, 0, 0, 0.7); }
}

@keyframes gentlePulse {
  from { opacity: 0.95; }
  to { opacity: 1; }
}

@keyframes gentleFadeIn {
  from { transform: translateY(-2px); }
  to { transform: translateY(0); }
}
/* Ø£Ù†Ù…Ø§Ø· Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… */
/* Ø£Ù†Ù…Ø§Ø· Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© Ù„ØªÙƒÙˆÙ† Ù…Ø«Ù„ Ù‚Ø§Ø¦Ù…Ø© menu */
/* Ø£Ù†Ù…Ø§Ø· Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… - Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ø´ÙƒÙ„ Ù‚Ø§Ø¦Ù…Ø© menu */
.rating-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  justify-content: center;
  align-items: flex-start;
  z-index: 10000;
  padding-top: 60px;
}

.rating-box {
background-color: #9C9C9C00; /* ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¹ØªØ§Ù…Ø© Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª */

  backdrop-filter: blur(8px); /* Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© ØªØ¶ÙŠÙ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¨Ù„ÙˆØ± */
  -webkit-backdrop-filter: blur(5px); 
  border-radius: 5px;
  padding: 15px;
  text-align: center;
  border: 1px solid #555;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  min-width: 250px;
  max-width: 300px;
  animation: slideDown 0.2s ease-out;
  position: absolute;
  right: 10px;
  top: 50px;
}

.rating-title {
  color: #000000;
  margin: 0 0 10px 0;
  padding-bottom: 8px;
  border-bottom: 1px solid #555;
  font-family: minecraft;
  font-size: 14px;
  text-align: left;
}

.stars-container {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin: 15px 0;
}

.star {
  font-size: 24px;
  color: #555;
  cursor: pointer;
  transition: all 0.2s;
  text-shadow: 0px 2px 9px #000000;
}

.star.active {
  color: #FFD700;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.7);
}

#confirmRating {
  background: none;
  border: none;
  color: #36E23A;
  text-shadow: 0px 2px 0px #000000;
  padding: 8px 12px;
  cursor: pointer;
  font-family: minecraft-five;
  font-size: 13px;
  border-radius: 3px;
  width: 100%;
  transition: background 0.2s;
  text-align: center;
}

#confirmRating:hover {
  background-color: #31AF34;
  color: white;
}

.rated-message {
  color: #FFFFFF;
  font-family: minecraft-five;
  font-size: 13px;
  margin-top: 10px;
  display: none;
  text-align: left;
}

.sticky-header.sticky {
  position: fixed;
  top: 0;
  animation: fadeIn 0.3s ease-in-out;
  transition: all 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0.9; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
} 
.header {
  background-color: #222222;
  padding: 10px 0;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
  
  /* Ø§Ø­ØªÙØ¸ Ø¨Ø¨Ø§Ù‚ÙŠ Ø®ØµØ§Ø¦Øµ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ© */
}
     .sticky-header {
  position: sticky;
  top: 0;
  z-index: 1000;
  width: 100%;
  
}
/* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø¶Ø§ÙØ© */
.points-added {
  position: absolute;
  top: -20px; /* Ø§Ø±ÙØ¹Ù‡ Ù‚Ù„ÙŠÙ„Ø§Ù‹ ÙÙˆÙ‚ Ø§Ù„Ù†Øµ */
  left: 59px;
  transform: translateX(50%);
  color: #2EFF37 !important;
  font-weight: bold;
  font-size: 1.2em !important;
  transition: all 1s ease-out;
  pointer-events: none;
  animation: floatUp 1s ease-out forwards;
  text-shadow: 0px 1px 0px #000000;
  
}

@keyframes floatUp {
  0% {
    transform: translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateY(-30px);
    opacity: 0;
  }
}

#fallTokens{
text-shadow:0px 1px 0px #3A1B00;
background: #915E04;
border: 2px solid #A65E0F;
color: #FFA252;
font-size: 17px;
transition: all 0.5s;
}
.marketplace-container {
  position: relative;
  
}


.particle {
  position: absolute;
  width: 7px;
  height: 7px;
  background-color: #FFC208;
  
  animation: riseUp 3s ease-out forwards;
  pointer-events: none;
  box-shadow: 2px 1px 15px 2px rgba(255, 210, 73, 1);
-webkit-box-shadow: 2px 1px 15px 2px rgba(255, 210, 73, 1);
-moz-box-shadow: 2px 1px 15px 2px rgba(255, 210, 72, 1);
  z-index: 1;
  
}

@keyframes riseUp {
  0% {
    transform: translateY(0) scale(1.4);
    opacity: 1;
  }
  40%{
    
    opacity: 1;
  }
  100% {
    transform: translateY(-60px) scale(0.7);
    opacity: 0;
  }
}
#marketplacebtn {
  width: 100%;
  padding: 10px;
  background-color: #FFFEBD;
  border: 2px solid #FFC208;
      box-shadow:
        0px var(--border-2x-thickness) 0px #97966E,
        0 0 0 var(--border-thickness) #1a1a1b,
        0 var(--border-2x-thickness) 0 var(--border-thickness) #1a1a1b;
  border-radius: 8px;
  transition: all 0.5s;
  position: relative;
  transition: all 0.3s ease;
  
}
#marketplacebtn:hover{
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  background-color: #9A996D;
border: 2px solid #FFE492;
    box-shadow:
        0px 0px 14px #77781E,
        0 0 0 var(--border-thickness) #1a1a1b,
        0 0 0 0 #1a1a1b;
  transform: translateY(var(--border-2x-thickness));
transition: all 0.3s ease;
}
#achievementbtn{
  width: 100%;
padding: 10px;
background-color: #966001;
border: 2px solid #F1BD0B;
box-shadow: 0 4px 0 #6D511F;
transition: all 0.5s;
color: #FFFFFF;
text-shadow: 2px 2px 5px #4F3506;
transition: all 0.3s ease;
}
#achievementbtn:hover{
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  background-color: #452D05;
border: 2px solid #FFDF92;
color: #F5F5F5;
box-shadow: 2px 0 15px #FFDF92;
transition: all 0.3s ease;
}

    
    .Elements-container {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
    }
    
    .Elements-left {
      flex: 1;
    }
    
    .Elements-right {
flex: 1;
    }
    
  
      @media (max-width: 768px) {
      .Elements-container {
        flex-direction: column;
  
      }
      
      .Elements-right {
        order: 2;
      width: 100%;
      }
      
      .Elements-left {
        order: 1;
        width: 100%;
      }
      
      .custom-alert-content {
        width: 90%;
      }
    }
    #hira-btn{
      width: 100%;
  padding: 10px;
  background-color: #976D79;
  border: 2px solid #FF699FA1;
  color: #E7C2DF;
      box-shadow:
        0px var(--border-2x-thickness) 0px #735567,
        0 0 0 var(--border-thickness) #1a1a1b,
        0 var(--border-2x-thickness) 0 var(--border-thickness) #1a1a1b; 
border-radius: 0px;
border-radius: 8px;
  transition: all 0.5s;
  position: relative;
  transition: all 0.3s ease;
              position: relative;
align-items: center;
justify-content: center;
font-weight: bold;
   overflow: hidden;
   box-sizing: border-box;
   white-space: nowrap;
   min-height: 14px;
    }
    #hira-btn:hover{
      border: 2px solid #FF93BA;
          box-shadow:
        0px 0px 14px #781E56,
        0 0 0 var(--border-thickness) #1a1a1b,
        0 0 0 0 #1a1a1b;
        transform: translateY(var(--border-2x-thickness));
    }
            #hira-btn::after {
   content: "";
   position: absolute;
   top: 0;
   left: -150%;
   width: 100%;
   height: 100%;
   background: linear-gradient(
      45deg, 
      rgba(255, 255, 255, 0) 48%, 
      rgba(255, 174, 210, 0.66) 50%, 
      rgba(255,255,255,0) 52%
   );
   animation: owner-shine 2.5s infinite ease-in-out;
   z-index: 1;
}

/* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† OWNER */
    @keyframes owner-shine {
   0% { left: -150%; }
   100% { left: 150%; }
}
    #chess-board-btn{
      width: 100%;
  padding: 10px;
  background-color: #402D1A;
  border: 2px solid #AA8149;
  color: #CCB18D;
      box-shadow:
        0px var(--border-2x-thickness) 0px #674425,
        0 0 0 var(--border-thickness) #1a1a1b,
        0 var(--border-2x-thickness) 0 var(--border-thickness) #1a1a1b; 
border-radius: 8px; 
font-family: MinecraftFive-Regular;
  transition: all 0.5s;
  position: relative;
  transition: all 0.3s ease;
align-items: center;
justify-content: center;
font-weight: bold;
   overflow: hidden;
   box-sizing: border-box;
   white-space: nowrap;
   min-height: 14px;
    }
    #chess-board-btn:hover{
      border: 2px solid #E9C8A4;
          box-shadow:
        0px 0px 0px #784F1E,
        0 0 0 var(--border-thickness) #1a1a1b,
        0 0 0 0 #1a1a1b;
        transform: translateY(var(--border-2x-thickness));
    }
    #tic-tac-toe-btn{
      width: 100%;
  padding: 10px;
  background: 
  linear-gradient(135deg, #8B0000, #00008B) padding-box,   /* Ø§Ù„Ø®Ù„ÙÙŠØ© */
  linear-gradient(90deg, #FF0000, #0000FF) border-box;     /* Ø§Ù„Ø¨ÙˆØ±Ø¯Ø± */
border: 2px solid transparent; 
color: #FFD6FF; 
border-radius: 8px; /* Ø§Ù„Ø­ÙˆØ§Ù Ù†Ø§Ø¹Ù…Ø© */

box-shadow:
  0px var(--border-2x-thickness) 0px rgba(255, 0, 0, 0.4),   /* Ø£Ø­Ù…Ø± */
  0px var(--border-2x-thickness) 0px rgba(0, 0, 255, 0.4),   /* Ø£Ø²Ø±Ù‚ */
  0 0 0 var(--border-thickness) #1a1a1b,
  0 var(--border-2x-thickness) 0 var(--border-thickness) #1a1a1b;
border-radius: 8px; 
font-family: MinecraftFive-Regular;
  transition: all 0.5s;
  position: relative;
  transition: all 0.3s ease;
align-items: center;
justify-content: center;
font-weight: bold;
   overflow: hidden;
   box-sizing: border-box;
   white-space: nowrap;
   min-height: 14px;
    }
    #tic-tac-toe-btn:hover{
      background: 
  linear-gradient(135deg, #8B0000, #00008B) padding-box,   /* Ø§Ù„Ø®Ù„ÙÙŠØ© */
  linear-gradient(90deg, #FF2F2F, #3434FF) border-box;     /* Ø§Ù„Ø¨ÙˆØ±Ø¯Ø± */
border: 2px solid transparent; 
          box-shadow:
        0px 0px 0px #784F1E,
        0 0 0 var(--border-thickness) #1a1a1b,
        0 0 0 0 #1a1a1b;
        transform: translateY(var(--border-2x-thickness));
    }
  </style>

</head>
  <script type="module" src="../scripts/main.js"></script>
<body>
<!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
<div class="notification-container" id="notificationContainer"></div>
<div class="sticky-header"> 
  <div class="header">
    <button class="users-btn" id="users-btn" type="button"></button>
    <button class="menu" id="menuButton" type="button"></button>
    <button class="rate" id="rateButton" type="button"></button>
      <button class="settings-btn" id="profile-sittings" type="button"></button>
Homepage 
  <img src="../icons/Win_Computer.gif" loading="lazy" height="25">  
  </div> 
  <div class="logout-dropdown" id="logoutDropdown">
  <h3>MENU</h3>
  <div class="logout-options">
    <button id="settingsButton" class="dropdown-button">Settings</button>
    
    <button id="cancelLogout" class="dropdown-button">Close</button>
    <button id="confirmLogout" class="dropdown-button">Sign out </button>
  </div>
  
</div>
  <div id="customAlert" class="custom-alert-overlay">
    <div class="custom-alert-box" id="customAlertBox">
      <h2>  ğŸ‰Congratulations ,you get </h2>
      <div class="custom-alert-points" id="customAlertPoints">0</div>
    </div>
  </div>
  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… -->
<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… -->
<div class="rating-overlay" id="ratingOverlay">
  <div class="rating-box">
    <h3 class="rating-title">Rate Our Website</h3>
    <div class="stars-container">
      <div class="star" data-rating="1">â˜…</div>
      <div class="star" data-rating="2">â˜…</div>
      <div class="star" data-rating="3">â˜…</div>
      <div class="star" data-rating="4">â˜…</div>
      <div class="star" data-rating="5">â˜…</div>
    </div>
    <button id="confirmRating">Confirm Rating</button>
    <div class="rated-message" id="ratedMessage">Thank you â¤ï¸!</div>
  </div>
</div>
</div>
  <div class="content"> 
   
    <h1 id="welcomeMessage"><img class="lodinimg" src="../icons/loading_spinner.gif" height="15" /></h1>

<div class="points">
  <div class="title">
    your wallet : <span id="points">
      <img class="lodinimg" src="../icons/loading_spinner.gif" height="13" /></span>
    <span id="points-float" style="display: inline-block; position: relative;"></span><img src="../icons/coinss_gif.gif" loading="lazy" height="15">|
    <span id="fallTokens">
      <img class="lodinimg" src="../icons/loading_spinner.gif" height="13" /></span>
    <img src="../icons/fall_token.png" alt="Fall Token" height="15">
  </div>
</div>
    <div class="Elements-container">
            <div class="Elements-left"> 

      <div class="description"> 
        Get coins between 1000 coine and 1 coine.
        <button id="whiteButton"> <img src="../icons/Alot_of_coins.gif" loading="lazy"height="16"> | coins +
        <audio id="coinSound" src="../sounds/coin_fill_up.ogg"></audio>
        </button>
        <!-- promo-banner ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ø±Ø¶ Ù…ÙØ¹Ù‘Ù„ -->
<div id="promo-banner" style="display: none; background: gold; padding: 10px;">
  ğŸ‰ Ø¹Ø±Ø¶ Ø®Ø§Øµ Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹ÙŠØ¯! Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ 50 Ù†Ù‚Ø·Ø© Ù…Ø¬Ø§Ù†Ù‹Ø§!
</div>
      </div> 
        <div class="description"> 
          <div class="title">marketplace</div> Buy features and things for your account. using your coins.
          <a href="marketplace.html">
            <div class="marketplace-container ">
              <button id="marketplacebtn"> <img src="../icons/Marketplace_new_logo.png"loading="lazy" height="15"> |  Marketplace</button>
            </div>
          </a> 
        </div>
                <div class="description">
          <div class="title">Learning hiragana</div> Learn japanese exactly hiragana.
          <a href="$">
            <div class="hira-container ">
              <button id="hira-btn"> ğŸŒ¸ | Learn japanese</button>
            </div>
          </a>
        </div>
                        <div class="description">
                  <div class="title">chechess board </div> Play games with your self or with others, enjoy. 
                  <a href="chess-board.html">
                      <button id="chess-board-btn"><img src="../icons/chess-board-icon.svg" width="15"> | Play chess</button>
                  </a>
                </div>
                <div class="description">
                                    <div class="title">tic tac toe (xo)</div> Play Tic Tac Toe (xo)  with your friends and bet their coins. 
                  <a href="tic-tac-toe.html">
                      <button id="tic-tac-toe-btn">XO | play <font style="color: dodgerblue; font-family: MinecraftFive-Regular;">Tic</font>  <font style="color: red;font-family: MinecraftFive-Regular;">Tac</font> <font style="color: dodgerblue;font-family: MinecraftFive-Regular;">Toe</font> (<font style="color: dodgerblue;font-family: MinecraftFive-Regular;">x</font><font style="color: red;font-family: MinecraftFive-Regular;">o</font>) </button>
                  </a>

                </div>
        <!---
                <div class="description">
          <div class="title">Achievements</div> Complete missions to get achievements. 
          <a href="marketplace.html">
            <div class="button">
              <button id="achievementbtn">achievements <img src="../icons/Achievements_book.png" loading="lazy" height="15"></button>
            </div>
          </a>
        </div>

         <div class="description"> 
           <div class="title">Trading </div>Trade your coins on the MC Co trading platform.
             <a href="trading.html">
               <div class="button">
                <button id="blueButton">Dev.Trading dashboard <img src="../icons/chart_up.png"loading="lazy" height="15"></button>
                 </div>
               </a> 
        </div>
        -->
            </div>
            <div class="Elements-right"> 

            </div>
    </div>

  
<script>
  const button = document.getElementById('marketplacebtn');
  const container = document.querySelector('.marketplace-container');
  
  function createParticle() {
    const particle = document.createElement('div');
    particle.classList.add('particle');
    
    // ØªÙˆÙ„ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø­ÙˆÙ„ Ø§Ù„Ø²Ø±
    const padding = 10;
    const randomX = Math.random() * (button.offsetWidth + padding * 2) - padding;
    const randomY = Math.random() * (button.offsetHeight + padding * 2) - padding;
    
    particle.style.left = `${randomX}px`;
    particle.style.top = `${randomY}px`;
    
    container.appendChild(particle);
    
    // Ø­Ø°Ù Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø£Ù†Ù…ÙŠØ´Ù†
    setTimeout(() => {
      particle.remove();
    }, 3000);
  }
  
  // ØªÙˆÙ„ÙŠØ¯ Ø¬Ø²ÙŠØ¦Ø§Øª Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ…Ø±
  setInterval(createParticle, 300);
  
</script>
<script>

  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js");
  }
</script>
<script>
  document.getElementById("users-btn").addEventListener("click", function() {
    window.location.href = "Friends-management.html";
  });
  document.getElementById("profile-sittings").addEventListener("click", function() {
  window.location.href = "profile-settings.html";
});
</script>
  <script>
    document.getElementById('whiteButton').addEventListener('click', function () {
      const coinCount = Math.floor(Math.random() * 8) + 5; // Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ù…Ù† 5 Ø¥Ù„Ù‰ 12
      for (let i = 0; i < coinCount; i++) {
        createCoinParticle();
      }
    });

    function createCoinParticle() {
      const button = document.getElementById('whiteButton');
      const buttonRect = button.getBoundingClientRect();
      const description = document.querySelector('.description');

      const coin = document.createElement('div');
      coin.className = 'coin-particle';

      // Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„Ø©: Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø­ÙˆÙ„ Ø§Ù„Ø²Ø±
      const padding = 30; // Ø§Ù„Ù…Ø³Ø§ÙØ© Ø­ÙˆÙ„ Ø§Ù„Ø²Ø±
      const randomX = Math.random() * (buttonRect.width + padding * 2) - padding;
      const randomY = Math.random() * (buttonRect.height + padding * 2) - padding;

      coin.style.left = (button.offsetLeft + randomX) + 'px';
      coin.style.top = (button.offsetTop + randomY) + 'px';

      // Ø­Ø±ÙƒØ© ØµØºÙŠØ±Ø© Ù„ÙƒÙ„ Ø¹Ù…Ù„Ø©
      const moveX = (Math.random() - 0.5) * 60 + 'px';
      const moveY = (Math.random() - 0.5) * 60 + 'px';

      coin.style.setProperty('--move-x', moveX);
      coin.style.setProperty('--move-y', moveY);

      description.appendChild(coin);

      // Ø­Ø°Ù Ø§Ù„Ø¹Ù…Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø£Ù†Ù…ÙŠØ´Ù†
      setTimeout(() => {
        coin.remove();
      }, 1500);
    }

  document.getElementById("whiteButton").addEventListener("click", function () {
    const sound = new Audio("../sounds/coin_fill_up.ogg");
    sound.play();
  });
  </script>

<script type="module">
import { db } from '../scripts/main.js';   
import {  
  doc, getDoc, updateDoc, collection, onSnapshot, query, where, orderBy, increment, addDoc
} from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";  

import {  
  GoogleAuthProvider, signInWithPopup, signInAnonymously, onAuthStateChanged, signOut
} from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";  

const activeUser = localStorage.getItem('activeUser');  

if (!activeUser) {  
  alert('Please log in first!');
  window.location.href = 'login-page.html';
}

// ==================== Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================
// Ù†Ø¶ÙŠÙ caching Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… localStorage Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª
const USER_CACHE_KEY = `user_data_${activeUser}`;
const CACHE_EXPIRY = 5 * 60 * 1000; // 5 Ø¯Ù‚Ø§Ø¦Ù‚ ØµÙ„Ø§Ø­ÙŠØ©

async function getUserData() {
  try {
    // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒØ§Ø´ Ø£ÙˆÙ„Ø§Ù‹
    const cachedData = JSON.parse(localStorage.getItem(USER_CACHE_KEY));
    if (cachedData && Date.now() - cachedData.timestamp < CACHE_EXPIRY) {
      displayUserData(cachedData.data);
      return;
    }
    
    const userDocRef = doc(db, 'users', activeUser);
    const snap = await getDoc(userDocRef);
    
    if (!snap.exists()) {
      throw new Error("Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    }
    
    const user = snap.data();
    displayUserData(user);
    
    // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ÙƒØ§Ø´
    localStorage.setItem(USER_CACHE_KEY, JSON.stringify({
      data: user,
      timestamp: Date.now()
    }));
    
  } catch (error) {
    console.error("Error fetching user data:", error);
    // Ù…ÙŠØ²Ø© Ø¬Ø¯ÙŠØ¯Ø©: Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
    const welcomeElement = document.getElementById('welcomeMessage');
    welcomeElement.textContent = "Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª! ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.";
    welcomeElement.style.color = 'red';
    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†Ù (Ù‚ÙˆØ© Ø¥Ø¶Ø§ÙÙŠØ©)
    setTimeout(getUserData, 5000);
  }
}

// ÙØµÙ„ Ø§Ù„Ø¹Ø±Ø¶ ÙÙŠ Ø¯Ø§Ù„Ø© Ù…Ù†ÙØµÙ„Ø© Ù„Ù„Ù†Ø¸Ø§ÙØ©
function displayUserData(user) {
  const welcomeElement = document.getElementById('welcomeMessage');
  const pointsElement = document.getElementById('points');
  const fallTokensElement = document.getElementById('fallTokens');
  
  if (!welcomeElement || !pointsElement || !fallTokensElement) return;
  
  welcomeElement.style.opacity = '1';
  welcomeElement.style.transform = 'translateY(0)';
  smoothTypeWriter(`Welcome ${activeUser}!`, welcomeElement, 80);
  
  formatPoints(user.points ?? 0, pointsElement);
  formatPoints(user.fallTokens ?? 0, fallTokensElement);
}

// ==================== Ø¯Ø§Ù„Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø³Ù„Ø³Ø© ====================
async function smoothTypeWriter(text, element, speed = 80) {
  element.innerHTML = "";
  element.classList.add('smooth-typing');
  for (const char of text) {
    element.innerHTML += char;
    await new Promise(resolve => setTimeout(resolve, speed));
    if (char === ' ') await new Promise(resolve => setTimeout(resolve, speed*1.5));
  }
  element.classList.remove('smooth-typing');
  element.classList.add('typing-complete');
}

// ==================== Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ø¹ Ø§Ù„Ø¹Ø¯ ====================
function formatPoints(num, element) {
  if (!element) return;

  const currentText = element.textContent.replace(/[^\d.]/g, '');
  const current = currentText ? parseFloat(currentText) : 0;
  const target = num;
  const duration = 800;
  const startTime = performance.now();

  function updateCounter(currentTime) {
    const elapsed = currentTime - startTime;
    const progress = Math.min(elapsed/duration,1);
    let value = current + (target - current) * progress;

    let formattedValue;
    if (value >= 1_000_000_000_000) formattedValue = (value/1_000_000_000_000).toFixed(1).replace(/\.0$/,'')+'T';
    else if (value >= 1_000_000_000) formattedValue = (value/1_000_000_000).toFixed(1).replace(/\.0$/,'')+'B';
    else if (value >= 1_000_000) formattedValue = (value/1_000_000).toFixed(1).replace(/\.0$/,'')+'M';
    else if (value >= 1_000) formattedValue = (value/1_000).toFixed(1).replace(/\.0$/,'')+'K';
    else formattedValue = value.toFixed(5).replace(/\.?0+$/,'');

    element.textContent = formattedValue;

    if(progress<1) requestAnimationFrame(updateCounter);
  }

  requestAnimationFrame(updateCounter);
}

// ==================== Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© ====================
function checkPrivacyPolicyRead() {
  const activeUser = localStorage.getItem('activeUser');
  if (activeUser) {
    checkDatabaseForPrivacyPolicy(activeUser);
  } else if (localStorage.getItem('privacyPolicyRead') !== 'true') {
    showPrivacyButton();
  }
  // Ù…ÙŠØ²Ø© Ø¬Ø¯ÙŠØ¯Ø©: ØªØ°ÙƒÙŠØ± Ø¯ÙˆØ±ÙŠ ÙƒÙ„ 24 Ø³Ø§Ø¹Ø© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙ‚Ø±Ø£
  setInterval(() => {
    if (localStorage.getItem('privacyPolicyRead') !== 'true') showPrivacyButton();
  }, 24 * 60 * 60 * 1000);
}

async function checkDatabaseForPrivacyPolicy(username) {
  try {
    const userDoc = await getDoc(doc(db, "users", username));
    if (userDoc.exists() && userDoc.data().privacy_policy !== 'readed') {
      showPrivacyButton();
    }
  } catch (e) {
    console.error(e);
    // Ù‚ÙˆØ©: Ø¹Ø±Ø¶ Ø§Ù„Ø²Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£
    showPrivacyButton();
  }
}

function showPrivacyButton() {
  if (document.getElementById('privacyPolicyBtn')) return;
  const btn = document.createElement('button');
  btn.id = 'privacyPolicyBtn';
  btn.textContent = 'Please read the privacy policy.';
  // ... Ø§Ù„Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø£ØµÙ„ÙŠ ...
  btn.addEventListener('click', () => {
    openPrivacyPolicy();
    // Ø£Ù…Ø§Ù† Ø¥Ø¶Ø§ÙÙŠ: Ù…Ù†Ø¹ XSS Ø¨ØªØµÙÙŠØ© Ø£ÙŠ Ø¥Ø¯Ø®Ø§Ù„ (Ù„ÙƒÙ† Ù‡Ù†Ø§ Ù…Ø´ Ù„Ø§Ø²Ù… ÙƒØ«ÙŠØ±)
  });
  document.body.appendChild(btn);
}
// ==================== Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ====================
let lastMessageTimestamp = null;

async function setupMessageListener() {
  const userDocRef = doc(db,'users',activeUser);
  const messagesRef = collection(db,"messages");

  try {
    const userDoc = await getDoc(userDocRef);
    if(!userDoc.exists()) return;

    const lastSeenData = userDoc.data().lastSeenMessages||{};
    const messagesQuery = query(messagesRef, where("receiver","==",activeUser), orderBy("timestamp","desc"));

    const unsubscribe = onSnapshot(messagesQuery, snapshot=>{
      snapshot.docChanges().forEach(change=>{
        if(change.type==="added"){
          const message=change.doc.data();
          const lastSeen=lastSeenData[message.sender];
          if(lastSeen && message.timestamp.toDate()<=new Date(lastSeen)) return;
          if(message.sender===activeUser) return;

          if(document.visibilityState!=='visible') showBrowserNotification(message.sender,message.message);
          showMessageNotification(message.sender,message.message,message.type);
        }
      });
    });

    window.addEventListener('beforeunload', unsubscribe);
  } catch(e){ console.error(e);}
}

function showBrowserNotification(sender,message){
  if(!("Notification" in window)) return;
  if(Notification.permission==="granted"){
    new Notification(`New message from ${sender}`,{body: message.length>50?message.substring(0,50)+'...':message,icon:"../icons/player-head-128-052ba.png"});
  } else if(Notification.permission!=="denied"){
    Notification.requestPermission().then(p=>{if(p==="granted") new Notification(`New message from ${sender}`,{body:message,icon:"../icons/player-head-128-052ba.png"});});
  }
}

function showMessageNotification(sender,message,type){
  const container=document.getElementById('notificationContainer');
  const notif=document.createElement('div');
  notif.className='notification';
  let displayContent = type==="image"?`<img src="${message}" style="max-width:100px; max-height:100px;">`:`<div class="notification-message">${message.length>30?message.substring(0,30)+'...':message}</div>`;
  notif.innerHTML=`
    <div class="notification-content">
      <div class="notification-title">New message from: ${sender}</div>
      <div style="width:100%;height:1px;background-color:white;margin:10px 0;"></div>
      ${displayContent}
    </div>
    <img src="../icons/player-head-128-052ba.png" alt="${sender}">
  `;
  notif.addEventListener('click',()=>{window.location.href=`chat-page.html?user=${sender}`; notif.remove();});
  container.appendChild(notif);
  setTimeout(()=>notif.remove(),9000);
}

// ==================== Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø· ====================
document.getElementById('whiteButton').addEventListener('click', async ()=>{
  const userDocRef = doc(db,'users',activeUser);
  const userDoc = await getDoc(userDocRef);

  if(userDoc.exists()){
    const user = userDoc.data();
    const chance = Math.random();
    const earnedPoints = chance<=0.05?Math.floor(Math.random()*11)+50:Math.floor(Math.random()*29)+1;

    showPointsAddedEffect(earnedPoints);
    await updateDoc(userDocRef,{points: user.points+earnedPoints});
    formatPoints(user.points+earnedPoints, document.getElementById('points'));
  } else alert('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!');
});

function showPointsAddedEffect(points){
  const pointsContainer=document.querySelector('.points');
  if(!pointsContainer) return;
  const addedElement=document.createElement('div');
  addedElement.className='points-added';
  addedElement.textContent=`+${points}`;
  addedElement.style.right='0';
  addedElement.style.top='0';
  pointsContainer.appendChild(addedElement);
  setTimeout(()=>addedElement.remove(),2000);
}

// ==================== ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø®ØµØµ ====================
function showCustomAlert(points,from=null){
  const overlay=document.getElementById('customAlert');
  const box=document.getElementById('customAlertBox');
  const pointsDisplay=document.getElementById('customAlertPoints');
  pointsDisplay.textContent=from?`${points} coins from ${from}`:`${points} coins.`;

  if(points<=10){ box.style.backgroundColor='silver'; box.style.boxShadow='0 0 15px rgba(123,123,123,1)'; box.style.color='#000'; }
  else if(points<=30){ box.style.backgroundColor='#FFD700'; box.style.boxShadow='0 0 15px rgba(255,205,106,1)'; box.style.color='#000'; }
  else if(points<=50){ box.style.backgroundColor='#C50DD8'; box.style.boxShadow='0 0 15px rgba(255,106,255,1)'; box.style.color='#fff'; }

  overlay.style.display='flex';
  setTimeout(()=>overlay.style.display='none',2000);
}

// ==================== ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ====================
document.addEventListener('DOMContentLoaded', ()=>{
  getUserData();
  setupMessageListener();
  checkPrivacyPolicyRead();
  if("Notification" in window) Notification.requestPermission();
});
</script>

<script>
  // ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ù…Ù† localStorage ÙˆÙ‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)  
async function checkRatingStatus() {  
  const rateButton = document.getElementById('rateButton');  
    
  // ØªØ­Ù‚Ù‚ Ù…Ù† localStorage Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø£Ø¯Ø§Ø¡ Ø£Ø³Ø±Ø¹  
  const localRated = localStorage.getItem('userRated');  
  if (localRated === 'true') {  
    rateButton.style.display = 'none';  
    return;  
  }  
    
  // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorageØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª  
  try {  
    const userDocRef = doc(db, 'users', activeUser);  
    const userDoc = await getDoc(userDocRef);  
      
    if (userDoc.exists() && userDoc.data().hasRated) {  
      localStorage.setItem('userRated', 'true');  
      rateButton.style.display = 'none';  
    }  
  } catch (error) {  
    console.error('Error checking rating status:', error);  
  }  
}  

// Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
document.getElementById('rateButton')?.addEventListener('click', function(e) {
  e.stopPropagation();
  const ratingOverlay = document.getElementById('ratingOverlay');
  ratingOverlay.style.display = 'flex';
  checkUserRating();
});

// ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
document.getElementById('confirmRating').addEventListener('click', async function() {
  const selectedRating = document.querySelector('.stars-container').getAttribute('data-selected');
  
  if (!selectedRating || selectedRating === '0') {
    alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØªÙ‚ÙŠÙŠÙ… Ø£ÙˆÙ„Ø§Ù‹!');
    return;
  }
  
  try {
    // Ø­ÙØ¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    await saveRating(parseInt(selectedRating));
    
    // Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙÙŠ localStorage
    localStorage.setItem('userRated', 'true');
    
    // Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
    document.getElementById('rateButton').style.display = 'none';
    
    // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø´ÙƒØ± ÙˆØ¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯
    document.getElementById('ratedMessage').style.display = 'block';
    document.getElementById('confirmRating').style.display = 'none';
    
    // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
    setTimeout(() => {
      document.getElementById('ratingOverlay').style.display = 'none';
    }, 2000);
    
  } catch (error) {
    console.error('Error confirming rating:', error);
    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹');
  }
});

// Ø¯Ø§Ù„Ø© Ø­ÙØ¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (ÙƒÙ…Ø§ Ù‡ÙŠ Ù…Ø¹ Ø¨Ø¹Ø¶ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª)
async function saveRating(rating) {
  const userDocRef = doc(db, 'users', activeUser);
  const ratingsRef = collection(db, 'ratings');
  
  // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
  await addDoc(ratingsRef, {
    username: activeUser,
    rating: rating,
    timestamp: new Date().toISOString()
  });
  
  // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  await updateDoc(userDocRef, {
    hasRated: true,
    lastRatingDate: new Date().toISOString()
  });
  
  // Ù…Ù†Ø­ Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¹Ø§Ù„ÙŠØ©
  if (rating >= 4) {
    const pointsEarned = rating === 5 ? 6000 : 10000;
    await updateDoc(userDocRef, {
      points: increment(pointsEarned)
    });
    showCustomAlert(pointsEarned, "Rating Reward");
  }
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©
async function checkUserRating() {
  try {
    const userDocRef = doc(db, 'users', activeUser);
    const userDoc = await getDoc(userDocRef);
    
    if (userDoc.exists() && userDoc.data().hasRated) {
      const ratingsRef = collection(db, 'ratings');
      const ratingQuery = query(ratingsRef, where("username", "==", activeUser));
      const querySnapshot = await getDocs(ratingQuery);
      
      querySnapshot.forEach((doc) => {
        const rating = doc.data().rating;
        
        stars.forEach((star, index) => {
          if (index < rating) {
            star.classList.add('active');
          }
        });
        
        document.querySelector('.stars-container').setAttribute('data-selected', rating);
        document.getElementById('ratedMessage').style.display = 'block';
        document.getElementById('confirmRating').style.display = 'none';
      });
    }
  } catch (error) {
    console.error('Error checking user rating:', error);
  }
}

</script>

<script>
  // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
// Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¨Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯
document.getElementById("menuButton").addEventListener('click', function(e) {
  e.stopPropagation(); // Ù…Ù†Ø¹ Ø§Ù†ØªØ´Ø§Ø± Ø§Ù„Ø­Ø¯Ø«
  const dropdown = document.getElementById('logoutDropdown');
  dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
});

// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
document.addEventListener('click', function(e) {
  if (!e.target.closest('.header')) {
    document.getElementById('logoutDropdown').style.display = 'none';
  }
});

// Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
document.getElementById('confirmLogout').addEventListener('click', function() {
  localStorage.removeItem('activeUser');
  window.location.href = 'login-page.html';
});

// Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØªÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹)
document.getElementById('settingsButton').addEventListener('click', function() {
  window.location.href = 'profile-settings.html';
  document.getElementById('logoutDropdown').style.display = 'none';
});

// Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡
document.getElementById('cancelLogout').addEventListener('click', function() {
  document.getElementById('logoutDropdown').style.display = 'none';
});

</script>

    <script>
window.addEventListener('scroll', function() {
  const header = document.querySelector('.sticky-header');
  if (window.scrollY > 0) {
    header.classList.add('sticky');
  } else {
    header.classList.remove('sticky');
  }
});
</script>
</body>
</html>
