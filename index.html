<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>mc community</title>
    <link rel="stylesheet" href="style/main.css">
    <link rel="icon" type="image/x-icon" href="web/ytlogo.png">
    <link rel="manifest" href="/manifest.json">
    
    <!-- أيقونة الموقع الأساسية -->
<link rel="icon" href="icons/icon-192x192.png" type="image/png">

<!-- لأجهزة iOS -->
<link rel="apple-touch-icon" href="icons/icon-180x180.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<!-- لون شريط العنوان في Chrome -->
<meta name="theme-color" content="#000000">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=F18SFG2LMZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'F18SFG2LMZ');
</script>
    <style>
        @font-face {
            font-family: minecraft;
            src: url('font/Minecraft-Default.otf');
        }
        @font-face {
            font-family: minecraft-ten;
            src: url('font/Minecraft-Ten.ttf');
        }
        @font-face {
            font-family: minecraft-five;
            src: url('font/Minecraft-Five.ttf');
        }
    </style>
</head>

<body>
<script>
  function isAndroid() {
    return /Android/i.test(navigator.userAgent);
  }

  function hasDownloaded() {
    return localStorage.getItem('app_downloaded') === 'true';
  }

  function markAsDownloaded() {
    localStorage.setItem('app_downloaded', 'true');
  }

  window.onload = function () {
    const btn = document.getElementById('downloadBtn');
    if (isAndroid() && !hasDownloaded()) {
      btn.style.display = 'block';
    }
  }

  function downloadApp() {
    markAsDownloaded();
    window.location.href = 'mc_co.apk';
    document.getElementById('downloadBtn').style.display = 'none';
  }
</script>
      <script>
  // دالة بسيطة لحساب تجزئة للنص (مثل البصمة)
  function hashString(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      hash = (hash << 5) - hash + str.charCodeAt(i);
      hash |= 0; // تحويل إلى 32bit
    }
    return hash;
  }

  fetch("pages/update.txt")
    .then(res => res.text())
    .then(text => {
      const currentHash = hashString(text);
      const savedHash = localStorage.getItem("lastUpdateHash");

      if (savedHash !== String(currentHash)) {
        alert(" ✨ New updates   🔥🔥:\n" + text);
        localStorage.setItem("lastUpdateHash", currentHash);
      }
    })
    .catch(err => console.error("تعذر تحميل التحديث:", err));
    if (localStorage.getItem(id)) {
    // إذا كان الملف موجودًا في التخزين المحلي، حمله مباشرة
    var cachedFile = localStorage.getItem(id);
    sendMessage({ event: 'fileStart', id: id, size: cachedFile.size });
}

</script>
    <div class="header">  Mc community<img src="Emojis/Allay_Dancing.gif" height="27">
    </div> 
    
    <div class="content"> 
<button id="downloadBtn" style="display:none;" onclick="downloadApp()">
  تحميل التطبيق للأندرويد
</button>
    <!--    <div class="description">A site to communicate with other users, interact and have fun. <br>+
          Creator: <a href="YOUTUBE CHANNEL" target="_blank" class="link">Aniss <img src="Emojis/trophy_gif.gif" height="15"></a> 
            <br>+
            Source Credits: <a href="https://www.youtube.com/@T1M0THYYT" target="_blank" class="link">TIМ0THY YT <img src="Emojis/medal_silver_gif.gif" height="15"></a>
        </div> --> 
        <div class="description"> 
<div class="title"> login / create an account </div> 
Click at gold button to Login or Create an account.
           <a href="pages/login.html">
             <div class="button">  
       <button id="goldButton" >Login & Register <img  src="imag/add-player@0.5x.icon-2f437.png" height="15"></button></div></a> 
       
</div>
        <div class="description">
            <div class="title"> <img src="Emojis/notepad_gif.gif" height="15">What is  mc community?
            </div>
            Mc community a public site that includes all people. Its features include collecting coins and purchasing items from the store or sending them to others. It also provides a chat feature and allows you to communicate with other users and interact with them. 
          </div>
         <div class="description">
            <div class="title">about the developers
            </div>Click to get more information .
            <a href="pages/Developers.html"> 
            <div class="button">
              <button id="purpleButton">About the Developers <img src="Emojis/article_gif.gif" height="15"></button></a> 
              </div> 
        </div>
      
        
        <div class="description">
            <div class="title"> privacy policy </div>This going to change in later updates
            <a href="pages/privacy.html"> 
            <div class="button">
              <button id="greenButton">Privacy policy 
              <img src="Emojis/gavel_gif.gif" height="15">
              </button></a> 
              </div> 
           </div>
        </div>
    </div>

      <script type="module">
// عند تحميل التطبيق
document.addEventListener('DOMContentLoaded', function() {
    if (typeof cordova !== 'undefined' && cordova.platformId === 'android') {
        // تحقق من إصدار أندرويد
        const androidVersion = window.device ? parseInt(window.device.version.split('.')[0]) : 0;
        if (androidVersion >= 13) {
            // طلب إذن الإشعارات عبر بلجن الـ Local Notifications
            if (window.cordova.plugins && window.cordova.plugins.notification) {
                cordova.plugins.notification.local.requestPermission(function(granted) {
                    console.log('الإذن:', granted ? 'مُمنوح' : 'مرفوض');
                });
            } else {
                console.error('بلجن الإشعارات غير مثبت!');
            }
        }
    }
});
</script>

  <script type="module" src="scripts/main.js"></script>


</body>
</html>