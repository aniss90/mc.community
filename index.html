<!DOCTYPE html>  
<html lang="ar">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>mc co</title>  
    <link rel="stylesheet" href="style/main.css">  
    <link rel="icon" type="image/x-icon" href="web/ytlogo.png">  
    <!-- Google tag (gtag.js) -->  
    <script async src="https://www.googletagmanager.com/gtag/js?id=F18SFG2LMZ"></script>  
    <script>  
      window.dataLayer = window.dataLayer || [];  
      function gtag(){dataLayer.push(arguments);}  
      gtag('js', new Date());  
      gtag('config', 'F18SFG2LMZ');  
    </script>  
    <style>  
        @font-face {  
            font-family: minecraft;  
            src: url('font/Minecraft-Default.otf');  
        }  
        @font-face {  
            font-family: minecraft-ten;  
            src: url('font/Minecraft-Ten.ttf');  
        }  
        @font-face {  
            font-family: minecraft-five;  
            src: url('font/Minecraft-Five.ttf');  
        }  
        .description{  
          font-size: 12px;  
        }  
          
        /* أنماط تقييم الموقع */  
        .header-rating {  
          background-color: #2E2100;  
          border: 2px solid #8C6A15;  
          padding: 8px 15px;  
          text-align: center;  
          font-family: minecraft-five;  
          color: #FFD952;  
          border-radius: 5px;  
          margin: 10px auto;  
          max-width: 300px;  
          box-shadow: 0px 3px 0px rgba(43, 30, 0, 1);  
        }  
          
        .site-rating {  
          display: flex;  
          align-items: center;  
          justify-content: center;  
          gap: 5px;  
          flex-wrap: wrap;  
        }  
          
        .stars {  
          display: inline-flex;  
          font-size: 18px;  
        }  
          
        .stars span {  
          color: #555;  
          text-shadow: 0px 1px 0px #000;  
        }  
          
        .stars span.active {  
          color: #FFD700;  
          text-shadow: 0 0 5px rgba(255, 215, 0, 0.7);  
        }  
          
        #ratingAverage {  
          font-weight: bold;  
          color: #FFD952;  
        }  
          
        #ratingCount {  
          color: #FFFFFF;  
        }  
          
        .news {  
          position: absolute;  
          border: none;  
          top: 20px;  
          left: 10px;  
          cursor: pointer;  
          padding: 10px;  
          background: url(imag/News.png);  
          background-size: contain;  
          background-position: center;  
          background-repeat: no-repeat;  
          z-index: 9999;  
        }  
          
        /* تصميم زر التحميل الأسطوري */
        .epic-download-btn {
          position: relative;
          display: block;
          margin: 20px auto;
          padding: 0;
          width: 280px;
          height: 80px;
          border: none;
          border-radius: 12px;
          background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%);
          color: #2E2100;
          font-family: minecraft-five;
          font-size: 18px;
          font-weight: bold;
          text-shadow: 0 1px 1px rgba(255,255,255,0.3);
          cursor: pointer;
          overflow: hidden;
          box-shadow: 0 6px 0 #8C6A15, 
                      0 10px 20px rgba(0,0,0,0.3),
                      inset 0 1px 1px rgba(255,255,255,0.2);
          transition: all 0.3s ease;
          z-index: 1;
        }

        .epic-download-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 0 #8C6A15, 
                      0 12px 24px rgba(0,0,0,0.4),
                      inset 0 1px 1px rgba(255,255,255,0.2);
        }

        .epic-download-btn:active {
          transform: translateY(4px);
          box-shadow: 0 2px 0 #8C6A15, 
                      0 5px 10px rgba(0,0,0,0.3),
                      inset 0 1px 1px rgba(255,255,255,0.2);
        }

        .btn-content {
          position: relative;
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          padding: 0 20px;
          z-index: 2;
          transition: all 0.5s ease;
        }

        .btn-icon {
          margin-right: 12px;
          animation: bounce 2s infinite;
          transition: all 0.5s ease;
        }

        .btn-text {
          display: flex;
          flex-direction: column;
          align-items: flex-start;
          transition: all 0.5s ease;
        }

        .main-text {
          font-size: 18px;
          line-height: 1.2;
        }

        .sub-text {
          font-size: 12px;
          opacity: 0.8;
        }

        .btn-glow {
          position: absolute;
          top: -50%;
          left: -50%;
          width: 200%;
          height: 200%;
          background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
          opacity: 0;
          transition: opacity 0.5s ease;
          z-index: 1;
        }

        .epic-download-btn:hover .btn-glow {
          opacity: 0.3;
        }

        .btn-pulse {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          border-radius: 12px;
          background: rgba(255, 215, 0, 0.4);
          animation: pulse 2s infinite;
          opacity: 0;
          z-index: 0;
        }

        /* تأثيرات ماينكرافت الجديدة */
        @keyframes minecraftShrink {
          0% { transform: scale(1); }
          50% { transform: scale(0.8); opacity: 0.8; }
          100% { transform: scale(1); opacity: 1; }
        }

        @keyframes minecraftPop {
          0% { transform: scale(0.5); }
          70% { transform: scale(1.2); }
          100% { transform: scale(1); }
        }

        @keyframes minecraftBreak {
          0% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.1); opacity: 0.8; }
          100% { transform: scale(0); opacity: 0; }
        }

        @keyframes minecraftParticles {
          0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
          100% { transform: translate(var(--tx), var(--ty)) rotate(360deg); opacity: 0; }
        }

        .minecraft-loading-text {
          font-family: minecraft-five;
          color: #2E2100;
          font-size: 16px;
          text-align: center;
          margin-top: 10px;
          animation: minecraftShrink 0.5s infinite alternate;
        }

        .minecraft-dots::after {
          content: '';
          animation: minecraftDotAnimation 1.5s infinite;
        }

        @keyframes minecraftDotAnimation {
          0% { content: '.'; }
          33% { content: '..'; }
          66% { content: '...'; }
          100% { content: '.'; }
        }

        @keyframes pulse {
          0% {
            transform: scale(0.95);
            opacity: 0;
          }
          50% {
            opacity: 0.4;
          }
          100% {
            transform: scale(1.1);
            opacity: 0;
          }
        }

        @keyframes bounce {
          0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
          }
          40% {
            transform: translateY(-10px);
          }
          60% {
            transform: translateY(-5px);
          }
        }


.social-icons {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 15px;
}

.social-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  
}

.social-icon img {
  width: 24px;
  height: 24px;
  filter: brightness(0) invert(1);
}

/* ألوان الأزرار حسب المنصة */
.discord {
background-color: #5865F2;
border: 2px solid #8C96FF;
box-shadow: 0 2px 0 0 #373AC4;
}
.youtube { 
  background-color: #FF0000;
  border: 2px solid  #FF8C8C ;
  box-shadow: 0 2px 0 0 #C43737;
  }
.facebook {
  background-color: #1877F2;
  border: 2px solid #8C95FF;
  box-shadow: 0 2px 0 0 #3763C4;
  
}
.telegram {
  background-color: #26A5E4;
  border: 2px solid #8CDEFF;
  box-shadow: 0 2px 0 0 #3798C4;
  }

/* تأثيرات الهافر */
.social-icon:hover {
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

/* تصميم متجاوب للشاشات الصغيرة */
@media (max-width: 768px) {
  .social-icons {
    gap: 10px;
  }
  
  .social-icon {
    width: 45px;
    height: 45px;
  }
  
  .social-icon img {
    width: 20px;
    height: 20px;
  }
}
.sticky-header.sticky {
  position: fixed;
  top: 0;
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0.9; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
} 
.header {
  background-color: #222222;
  padding: 10px 0;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
  
  /* احتفظ بباقي خصائص التصميم الحالية */
}
     .sticky-header {
  position: sticky;
  top: 0;
  z-index: 1000;
  width: 100%;
  
}
    </style>  
</head>  

<body>  
<script>  
  function isAndroid() {  
    return /Android/i.test(navigator.userAgent);  
  }  
  
  function hasDownloaded() {  
    return localStorage.getItem('app_downloaded') === 'true';  
  }  
  
  function markAsDownloaded() {  
    localStorage.setItem('app_downloaded', 'true');  
  }  
  
  window.onload = function () {  
    const btn = document.getElementById('downloadBtn');  
    if (isAndroid() && !hasDownloaded()) {  
      btn.style.display = 'block';  
    }  
  }  

  function downloadApp() {
    const btn = document.getElementById('downloadBtn');
    const btnContent = btn.querySelector('.btn-content');
    
    // 1. تأثير انكماش ماينكرافت
    btnContent.style.animation = "minecraftShrink 0.5s forwards";
    btnContent.querySelector('.btn-text').style.opacity = '0';
    
    // 2. تحويل الزر إلى أيقونة التطبيق مع تأثير POP
    setTimeout(() => {
      const icon = btnContent.querySelector('.btn-icon');
      icon.innerHTML = '<img src="imag/icon_panda.png" height="50" style="animation: minecraftPop 0.5s forwards">';
      icon.style.margin = '0 auto';
      icon.style.width = '100%';
      icon.style.textAlign = 'center';
      
      // 3. إضافة نص التحميل مع نقاط متحركة
      setTimeout(() => {
        const loadingText = document.createElement('div');
        loadingText.className = 'minecraft-loading-text';
        loadingText.innerHTML = 'Downloading<span class="minecraft-dots"></span>';
        btnContent.appendChild(loadingText);
        
        // 4. تأثير تفتيت ماينكرافت قبل التحميل
        setTimeout(() => {
          // إنشاء جزيئات التفتيت
          for (let i = 0; i < 8; i++) {
            const particle = document.createElement('div');
            particle.className = 'minecraft-particle';
            particle.style.position = 'absolute';
            particle.style.width = '10px';
            particle.style.height = '10px';
            particle.style.background = 'url(imag/icon_panda.png) center/contain no-repeat';
            particle.style.opacity = '0';
            particle.style.setProperty('--tx', `${Math.random() * 100 - 50}px`);
            particle.style.setProperty('--ty', `${Math.random() * 100 - 50}px`);
            btn.appendChild(particle);
            
            setTimeout(() => {
              particle.style.animation = 'minecraftParticles 1s forwards';
            }, i * 100);
          }
          
          // تأثير اختفاء الزر
          setTimeout(() => {
            btn.style.animation = 'minecraftBreak 0.5s forwards';
            
            // بدء التحميل الفعلي بعد التأثيرات
            setTimeout(() => {
              markAsDownloaded();
              window.location.href = 'mc_co.apk';
              localStorage.setItem('download_message', 'تم تحميل التطبيق بنجاح!');
            }, 500);
          }, 800);
        }, 1500);
      }, 500);
    }, 300);
  }
</script>  
<script>
  function generateHash(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      hash = (hash << 5) - hash + str.charCodeAt(i);
      hash |= 0;
    }
    return hash.toString();
  }
  
  function getNextVersion(currentVersion) {
    if (!currentVersion) return "1.0.0";
    const parts = currentVersion.split(".").map(Number);
    parts[2]++;
    if (parts[2] > 9) {
      parts[2] = 0;
      parts[1]++;
    }
    if (parts[1] > 9) {
      parts[1] = 0;
      parts[0]++;
    }
    return parts.join(".");
  }
  
  async function checkForSiteUpdates() {
    try {
      const response = await fetch("pages/update.txt?t=" + new Date().getTime());
      if (!response.ok) throw new Error("error loading update");
      const text = await response.text();
      
      const currentHash = generateHash(text);
      const previousHash = localStorage.getItem("lastUpdateHash");
      
      localStorage.setItem("lastUpdateText", text); // نحفظ النص دائمًا
      
      if (previousHash !== currentHash) {
        const currentVersion = localStorage.getItem("siteVersion") || "1.0.0";
        const newVersion = getNextVersion(currentVersion);
        
        localStorage.setItem("siteVersion", newVersion);
        localStorage.setItem("lastUpdateHash", currentHash);
        localStorage.setItem("updateNotificationSent", "false");
        
        alert("✨ new update:\n\n" + text);
      }
    } catch (error) {
      console.error("تعذر التحقق من التحديث:", error);
    }
  }
  
  function showUpdates() {
    const text = localStorage.getItem("lastUpdateText");
    if (text) {
      alert("✨ news:\n\n" + text);
    } else {
      alert("لا يوجد أخبار حالياً.\n no updates");
    }
  }
  
  checkForSiteUpdates();
</script>

<div class="sticky-header"> 
<div class="header">MC CO   
  <img src="Emojis/panda.png" height="27">  
  <button class="news" id="newsButton" type="button" onclick="showUpdates()"></button>  
</div>   
</div>
<div class="content">   
  <button id="downloadBtn" style="display:none;" onclick="downloadApp()" class="epic-download-btn">
    <span class="btn-content">
      <span class="btn-icon">
        <img src="imag/icon_panda.png" height="24" alt="MC CO Icon">
      </span>
      <span class="btn-text">
        <span class="main-text">Download MC CO App</span>
        <span class="sub-text">For Android - FREE</span>
      </span>
      <span class="btn-glow"></span>
    </span>
    <span class="btn-pulse"></span>
  </button>
  
  <div class="description">   
    <div class="title"> login / create an account </div>   
    Click at gold button to Login or Create an account.  
    <a href="pages/login.html">  
      <div class="button">    
        <button id="goldButton" title="gegege2g">Login & Register <img src="imag/add-player@0.5x.icon-2f437.png" height="15"></button>
      </div>
    </a>   
  </div>  
  
  <div class="description">  
    <div class="title"> <img src="Emojis/notepad_gif.gif" height="15">what's mc co ? <img src="imag/icon_panda.png" height="14"></div>  
    Mc co a public site that includes all people. Its features include collecting coins and purchasing items from the store or sending them to others. It also provides a chat feature and allows you to communicate with other users and interact with them.   
  </div>  
         
  <div class="description">  
    <div class="title">about the developers</div>
    Click to get more information .  
    <a href="Developers.html">   
      <div class="button">  
        <button id="purpleButton">About the Developers <img src="Emojis/article_gif.gif" height="15"></button>
      </div>
    </a>   
  </div>  
        
  <div class="description">  
    <div class="title"> privacy policy </div>Please read this before using the website.  
    <a href="privacy.html">   
      <div class="button">  
        <button id="greenButton">Privacy policy <img src="Emojis/gavel_gif.gif" height="15"></button>
      </div>
    </a>   
  </div>  
  <div class="description">
      <div class="title"> Our accounts</div> Follow us on our account to get all the latest news.
      <div class="social-icons">
        <!-- ديسكورد -->
        <a href="https://discord.gg/DJRY3mTa" class="social-icon discord" target="_blank" title="Discord">
          <img src="https://cdn.jsdelivr.net/npm/simple-icons@v5/icons/discord.svg" alt="Discord">
        </a>
        
        <!-- يوتيوب -->
        <a href="https://www.youtube.com/@mc-_-co-96" class="social-icon youtube" target="_blank" title="YouTube">
          <img src="https://cdn.jsdelivr.net/npm/simple-icons@v5/icons/youtube.svg" alt="YouTube">
        </a>
        
        <!-- فيسبوك -->
        <a href="https://www.facebook.com/share/1CAawr3XAj/" class="social-icon facebook" target="_blank" title="Facebook">
          <img src="https://cdn.jsdelivr.net/npm/simple-icons@v5/icons/facebook.svg" alt="Facebook">
        </a>
        
        <!-- تلجرام -->
        <a href="https://t.me/mccocommunity" class="social-icon telegram" target="_blank" title="Telegram">
          <img src="https://cdn.jsdelivr.net/npm/simple-icons@v5/icons/telegram.svg" alt="Telegram">
        </a>
        
      
      </div>
    </div>
  </div>


<script>
  // تحديد مسار Service Worker ديناميكيًا
const swPath = '/firebase-messaging-sw.js'; // مسار ثابت
  // تسجيل الـ Service Worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register(swPath)
      .then(function(registration) {
        console.log('Service Worker مسجل بنجاح:', registration);
      })
      .catch(function(error) {
        console.error('فشل تسجيل Service Worker:', error);
      });
  }
</script>

    <script>
window.addEventListener('scroll', function() {
  const header = document.querySelector('.sticky-header');
  if (window.scrollY > 0) {
    header.classList.add('sticky');
  } else {
    header.classList.remove('sticky');
  }
});
</script>
<!-- Firebase مكتبات -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-messaging-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

<!-- كود الإشعارات والحفظ في Firestore -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBf-HKpI4G5p6E0xP1OHGLxtDTGwE_0gg0",
    authDomain: "minecraft-community-4fd3d.firebaseapp.com",
    projectId: "minecraft-community-4fd3d",
    storageBucket: "minecraft-community-4fd3d.appspot.com",
    messagingSenderId: "550140131027",
    appId: "1:550140131027:web:a5186726cf5372e138c626",
    measurementId: "G-F18SFG2LMZ"
  };
  
  
  // تهيئة Firebase
  firebase.initializeApp(firebaseConfig);
  const messaging = firebase.messaging();
  const db = firebase.firestore();

  // دالة لحفظ التوكن
  async function saveTokenToFirestore(token) {
    try {
      const userId = firebase.auth().currentUser?.uid || "anonymous";
      await db.collection('tokens').doc(token).set({
        token: token,
        userId: userId,
        platform: 'web',
        userAgent: navigator.userAgent,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      });
      console.log("Token saved to Firestore.");

    } catch (error) {
      console.error("Error saving token:", error.message);
    
    }
  }

  // طلب الإذن للإشعارات
  Notification.requestPermission().then((permission) => {
    if (permission === "granted") {
      // إظهار alert ثابت


      messaging.getToken({
        vapidKey: "BKr9_yZic3lEvoZSAzx64GCELceKgqA6AWsnaZvsSAPplWo99IONeYgMoipVV8TMELaDc4GE_MabtqLnkBFwiPM"
      }).then(async (token) => {
        if (token) {
          console.log("Token:", token);
          await saveTokenToFirestore(token);
        } else {
          
          console.warn("No token retrieved.");
        }
      }).catch((err) => {
        console.error("Error getting token:", err);
        
      });

    } else {
    
      console.warn("Notification permission not granted.");
    }
  });

  // استقبال الإشعارات أثناء استخدام الموقع
  messaging.onMessage((payload) => {
    console.log("Message received: ", payload);
    const notificationTitle = payload.notification.title;
    const notificationOptions = {
      body: payload.notification.body,
      icon: "/icon.png"
    };
    new Notification(notificationTitle, notificationOptions);
  });
</script>
<script type="module" src="scripts/main.js"></script>  

</body>  
</html>